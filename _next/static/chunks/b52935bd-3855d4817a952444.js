"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7231],{122312:function(e,t,n){var a,i,r=n(133117),u=n(194425),o=n(426018),p=n(594654),s=n(288306),l=n(387806),d=n(215875),y=n(180311),c=n(838309),m=n(480937),T=n(886937),f=n(594654),b=n(66604),w=n(112297),h=n(8400),g=n(62089),A=n(705923),E=n(271033),S=n(972047),I=n(185205),P=n(944908),k=n(978754);function C(e){return e&&e.__esModule?e:{default:e}}var _=C(o),O=C(p),v=C(s),N=C(c),M=C(m),q=C(T),R=C(f),B=C(b),x=C(w),D=C(h),F=C(S),L=C(I),U=C(P),H={};function W({amplifier:e,balances:t}){let n=t.length;_.default(n>1,"To get constant D, pool should have at least two coins.");let a=t.reduce((e,t)=>e+BigInt(t),u.ZERO);if(a===u.ZERO)return u.ZERO;let i=BigInt(n),r=u.ONE,o=BigInt(e)*i,p=u.ZERO,s=a;for(let e=0;e<255;e+=1){let e=s;for(let n of t)e=e*s/(BigInt(n)*i+1n);if(p=s,(s=(o*a+e*i)*s/((o-u.ONE)*s+(i+u.ONE)*e))>p&&s-p<=r||s<=p&&p-s<=r)break}return s}function $({amplifier:e,balances:t,i:n,j:a,x:i}){let r=t.length;_.default(r>1,"To get y, pool should have at least two coins."),_.default(n!==a&&n>=0&&a>=0&&n<r&&a<r,`Invalid i: ${n} and j: ${a}`);let o=BigInt(r),p=W({amplifier:e,balances:t}),s=u.ZERO,l=p,d=BigInt(e)*o;for(let[e,r]of t.entries()){if(e===a)continue;let t=BigInt(r);e===n&&(t+=BigInt(i)),_.default(t>u.ZERO,"Insufficient liquidity"),s+=t,l=l*p/(t*o)}l=l*p/(d*o);let y=s+p/d,c=u.ONE,m=u.ZERO,T=p;for(let e=0;e<255&&(m=T,(!((T=(T*T+l)/(2n*T+y-p))>m)||!(T-m<=c))&&(!(T<=m)||!(m-T<=c)));e+=1);return T}r.__export(H,{getD:()=>W,getLPOutput:()=>X,getLPOutputWithoutFee:()=>j,getSwapInput:()=>K,getSwapInputWithtouFee:()=>Y,getSwapOutput:()=>Q,getSwapOutputWithoutFee:()=>Z});var V=10n**18n,G=e=>e.quotient*V/10n**BigInt(e.currency.decimals),z=(e,t)=>u.CurrencyAmount.fromRawAmount(e,t*10n**BigInt(e.decimals)/V);function X({amplifier:e,balances:t,totalSupply:n,amounts:a,fee:i}){let r=n.currency,o=n.quotient;if(o===u.ZERO||!t.length||t.every(e=>e.quotient===u.ZERO)){let t=W({amplifier:e,balances:a.map(G)});return u.CurrencyAmount.fromRawAmount(r,t)}let p=[],s=[];for(let[e,n]of t.entries()){let t=a[e]||u.CurrencyAmount.fromRawAmount(n.currency,0);_.default(t.currency.wrapped.equals(n.currency.wrapped),"User input currency should be the same as pool balance currency.");let i=G(n),r=G(t);p.push(i),s.push(i+r)}let l=W({amplifier:e,balances:p}),d=W({amplifier:e,balances:s});if(_.default(d>=l,"D1 should be greater than or equal than d0."),o<=u.ZERO)return u.CurrencyAmount.fromRawAmount(n.currency,d);let y=p.length,c=i.multiply(y).divide(4*(y-1));for(let[e,t]of p.entries()){let n=d*t/l,a=u.ZERO;a=n>s[e]?n-s[e]:s[e]-n;let i=c.multiply(a).quotient;s[e]=s[e]-i}let m=o*(W({amplifier:e,balances:s})-l)/l;return u.CurrencyAmount.fromRawAmount(n.currency,m)}function j(e){return X({...e,fee:new u.Percent(0)})}function Q({amplifier:e,balances:t,outputCurrency:n,amount:a,fee:i}){let r=e=>_.default(!e.lessThan(u.ZERO),"Insufficient liquidity to perform the swap"),o=null,p=null,s=[];for(let[e,i]of t.entries()){if(s.push(G(i)),i.currency.wrapped.equals(a.currency.wrapped)){o=e;continue}if(i.currency.wrapped.equals(n.wrapped)){p=e;continue}}if(_.default(null!==o&&null!==p&&o!==p,"Input currency or output currency does not match currencies of token balances."),a.quotient<u.ZERO){let t=z(n,$({amplifier:e,balances:s,i:o,j:p,x:u.ONE_HUNDRED_PERCENT.subtract(i).invert().multiply(G(a)).quotient})-s[p]);return r(t),t}let l=$({amplifier:e,balances:s,i:o,j:p,x:G(a)}),d=s[p]-l,y=i.multiply(d).quotient,c=z(n,d-y);return r(c),c}function Z(e){return Q({...e,fee:new u.Percent(0)})}function K({amount:e,...t}){return Q({...t,amount:u.CurrencyAmount.fromRawAmount(e.currency,-e.quotient)})}function Y(e){return K({...e,fee:new u.Percent(0)})}var J={};r.__export(J,{APISchema:()=>tW,Transformer:()=>eI,createOffChainQuoteProvider:()=>tP,createPoolProvider:()=>tI,createQuoteProvider:()=>tH,createStaticPoolProvider:()=>tS,getAllV3PoolsFromSubgraph:()=>e3,getBestTrade:()=>ej,getCandidatePools:()=>tE,getCheckAgainstBaseTokens:()=>ex,getExecutionPrice:()=>eh,getMidPrice:()=>eT,getPairCombinations:()=>eD,getPoolAddress:()=>el,getStableCandidatePools:()=>tA,getStablePoolsOnChain:()=>e8,getV2CandidatePools:()=>tm,getV2PoolSubgraph:()=>e6,getV2PoolsOnChain:()=>e4,getV3CandidatePools:()=>tg,getV3PoolSubgraph:()=>e0,getV3PoolsWithoutTicksOnChain:()=>e9,involvesCurrency:()=>eu,isStablePool:()=>er,isV2Pool:()=>ea,isV3Pool:()=>ei,log:()=>eS,maximumAmountIn:()=>eg,metric:()=>eE,minimumAmountOut:()=>eA,v2PoolSubgraphSelection:()=>ty,v3PoolSubgraphSelection:()=>td});var ee=function(e,t){if(e&&t)try{let n=d.parseUnits(e,t.decimals).toString();if("0"!==n)return y.CurrencyAmount.fromRawAmount(t,BigInt(n))}catch(t){console.debug(`Failed to parse input amount: "${e}"`,t)}},et=((a=et||{})[a.V2=0]="V2",a[a.V3=1]="V3",a[a.STABLE=2]="STABLE",a),en=((i=en||{})[i.V2=0]="V2",i[i.V3=1]="V3",i[i.STABLE=2]="STABLE",i[i.MIXED=3]="MIXED",i);function ea(e){return 0===e.type}function ei(e){return 1===e.type}function er(e){return 2===e.type&&e.balances.length>=2}function eu(e,t){let n=t.wrapped;if(ea(e)){let{reserve0:t,reserve1:a}=e;return t.currency.equals(n)||a.currency.equals(n)}if(ei(e)){let{token0:t,token1:a}=e;return t.equals(n)||a.equals(n)}if(er(e)){let{balances:t}=e;return t.some(e=>e.currency.equals(n))}return!1}function eo(e,t){let n=t.wrapped;if(ea(e)){let{reserve0:t,reserve1:a}=e;return t.currency.equals(n)?a.currency:t.currency}if(ei(e)){let{token0:t,token1:a}=e;return t.equals(n)?a:t}if(er(e)){let{balances:t}=e;return t[0].currency.equals(n)?t[1].currency:t[0].currency}throw Error("Cannot get output currency by invalid pool")}var ep=v.default(l.computePoolAddress,({deployerAddress:e,tokenA:t,tokenB:n,fee:a})=>`${t.chainId}_${e}_${t.address}_${n.address}_${a}`),es=v.default(u.Pair.getAddress,(e,t)=>`${e.chainId}_${e.address}_${t.address}`),el=v.default(function(e){if(er(e)||ei(e))return e.address;if(ea(e)){let{reserve0:t,reserve1:n}=e;return es(t.currency.wrapped,n.currency.wrapped)}return""},e=>{if(er(e)){let{balances:t}=e,n=t.map(e=>e.currency.wrapped.address);return`${e.type}_${t[0]?.currency.chainId}_${n.join("_")}`}let[t,n]=ea(e)?[e.reserve0.currency.wrapped,e.reserve1.currency.wrapped]:[e.token0.wrapped,e.token1.wrapped];return`${e.type}_${t.chainId}_${t.address}_${n.address}`});function ed(e,t,n){if(ei(e)){let{token0:n,token1:a,fee:i,liquidity:r,sqrtRatioX96:u,tick:o}=e;return new l.Pool(n.wrapped,a.wrapped,i,u,r,o).priceOf(t.wrapped)}if(ea(e))return new u.Pair(e.reserve0.wrapped,e.reserve1.wrapped).priceOf(t.wrapped);if(er(e)){let{amplifier:a,balances:i,fee:r}=e,o=ee("1",t);if(!o)throw Error(`Cannot parse amount for ${t.symbol}`);let p=Q({amplifier:a,balances:i,fee:r,outputCurrency:n,amount:o});return new u.Price({baseAmount:o,quoteAmount:p})}return new u.Price(t,n,1n,0n)}function ey(...e){let t=e[0]?.chainId;for(let n of e)if(n.chainId!==t)return!1;return!0}function ec(e,t,n){let a=[t.wrapped],i=a[0],r=null,u=(e,t)=>null===t?em(e):3===t||t!==em(e)?3:t;for(let t of e)i=eo(t,i),a.push(i),r=u(t,r);if(null===r)throw Error("Invalid route type when constructing base route");return{path:a,pools:e,type:r,input:t,output:n}}function em(e){switch(e.type){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}}function eT({path:e,pools:t}){let n=0,a=null;for(let i of t){let t=ed(i,e[n].wrapped,e[n+1].wrapped);a=a?a.multiply(t):t,n+=1}if(!a)throw Error("Get mid price failed");return a}function ef(e,t){let n=e.input.wrapped,{path:a,types:i}=e.pools.reduce(({inputToken:e,path:t,types:n},a,i)=>{let u=eo(a,e).wrapped,o=ei(a)?a.fee:r.V2_FEE_PATH_PLACEHOLDER;return 0===i?{inputToken:u,types:["address","uint24","address"],path:[e.address,o,u.address]}:{inputToken:u,types:[...n,"uint24","address"],path:[...t,o,u.address]}},{inputToken:n,path:[],types:[]});return t?d.encodePacked(i.reverse(),a.reverse()):d.encodePacked(i,a)}function eb(e){return r.usdGasTokensByChain[e]?.[0]??null}function ew(e){return u.WNATIVE[e]??null}function eh({inputAmount:e,outputAmount:t}){return e.quotient===u.ZERO||t.quotient===u.ZERO?null:new u.Price(e.currency,t.currency,e.quotient,t.quotient)}function eg(e,t,n=e.inputAmount){if(e.tradeType===u.TradeType.EXACT_INPUT)return n;let a=new u.Fraction(u.ONE).add(t).multiply(n.quotient).quotient;return u.CurrencyAmount.fromRawAmount(n.currency,a)}function eA(e,t,n=e.outputAmount){if(e.tradeType===u.TradeType.EXACT_OUTPUT)return n;let a=new u.Fraction(u.ONE).add(t).invert().multiply(n.quotient).quotient;return u.CurrencyAmount.fromRawAmount(n.currency,a)}var eE=N.default("smart-router:metric"),eS=N.default("smart-router:log"),eI={};function eP(e){return{address:e.isNative?l.ADDRESS_ZERO:e.wrapped.address,decimals:e.decimals,symbol:e.symbol}}function ek(e){return{currency:eP(e.currency),value:e.quotient.toString()}}function eC(e){if(ea(e))return{...e,reserve0:ek(e.reserve0),reserve1:ek(e.reserve1)};if(ei(e))return{...e,token0:eP(e.token0),token1:eP(e.token1),liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),token0ProtocolFee:e.token0ProtocolFee.toFixed(0),token1ProtocolFee:e.token1ProtocolFee.toFixed(0)};if(er(e))return{...e,balances:e.balances.map(ek),amplifier:e.amplifier.toString(),fee:e.fee.toSignificant(6)};throw Error("Cannot serialize unsupoorted pool")}function e_(e){return{...e,pools:e.pools.map(eC),path:e.path.map(eP),inputAmount:ek(e.inputAmount),outputAmount:ek(e.outputAmount)}}function eO(e){return{...e,inputAmount:ek(e.inputAmount),outputAmount:ek(e.outputAmount),routes:e.routes.map(e_),gasEstimate:e.gasEstimate.toString(),gasEstimateInUSD:ek(e.gasEstimateInUSD)}}function ev(e,t){if(t.address===l.ADDRESS_ZERO)return u.Native.onChain(e);let{address:n,decimals:a,symbol:i}=t;return new u.ERC20Token(e,n,a,i)}function eN(e,t){return u.CurrencyAmount.fromRawAmount(ev(e,t.currency),t.value)}function eM(e,t){if(0===t.type)return{...t,reserve0:eN(e,t.reserve0),reserve1:eN(e,t.reserve1)};if(1===t.type)return{...t,token0:ev(e,t.token0),token1:ev(e,t.token1),liquidity:BigInt(t.liquidity),sqrtRatioX96:BigInt(t.sqrtRatioX96),token0ProtocolFee:new u.Percent(t.token0ProtocolFee,100n),token1ProtocolFee:new u.Percent(t.token1ProtocolFee,100n)};if(2===t.type)return{...t,balances:t.balances.map(t=>eN(e,t)),amplifier:BigInt(t.amplifier),fee:new u.Percent(1e6*parseFloat(t.fee),1000000n*100n)};throw Error("Cannot parse unsupoorted pool")}function eq(e,t){return{...t,pools:t.pools.map(t=>eM(e,t)),path:t.path.map(t=>ev(e,t)),inputAmount:eN(e,t.inputAmount),outputAmount:eN(e,t.outputAmount)}}function eR(e,t){return{...t,inputAmount:eN(e,t.inputAmount),outputAmount:eN(e,t.outputAmount),routes:t.routes.map(t=>eq(e,t)),gasEstimate:BigInt(t.gasEstimate),gasEstimateInUSD:eN(e,t.gasEstimateInUSD)}}r.__export(eI,{parseCurrency:()=>ev,parseCurrencyAmount:()=>eN,parsePool:()=>eM,parseRoute:()=>eq,parseTrade:()=>eR,serializeCurrency:()=>eP,serializeCurrencyAmount:()=>ek,serializePool:()=>eC,serializeRoute:()=>e_,serializeTrade:()=>eO});var eB=(e,t)=>{if(!e||!t||e.wrapped.equals(t.wrapped))return`${e?.chainId}_${e?.wrapped?.address}_${t?.wrapped?.address}`;let[n,a]=e.wrapped.sortsBefore(t.wrapped)?[e.wrapped,t.wrapped]:[t.wrapped,e.wrapped];return`${n.chainId}_${n.address}_${a.address}`},ex=v.default((e,t)=>{let n=e?.chainId;if(!n||!e||!t||!ey(e,t))return[];let[a,i]=n?[r.wrappedCurrency(e,n),r.wrappedCurrency(t,n)]:[void 0,void 0];return a&&i?[...r.BASES_TO_CHECK_TRADES_AGAINST[n]??[],...a?r.ADDITIONAL_BASES[n]?.[a.address]??[]:[],...i?r.ADDITIONAL_BASES[n]?.[i.address]??[]:[]]:[]},eB),eD=v.default((e,t)=>{let n=e?.chainId;if(!n||!e||!t||!ey(e,t))return[];let[a,i]=n?[r.wrappedCurrency(e,n),r.wrappedCurrency(t,n)]:[void 0,void 0];if(!a||!i)return[];let u=ex(e,t),o=O.default(u,e=>u.map(t=>[e,t]));return[[a,i],...u.map(e=>[a,e]),...u.map(e=>[i,e]),...o].filter(e=>!!(e[0]&&e[1])).filter(([e,t])=>!e.equals(t)).filter(([e,t])=>{if(!n)return!0;let a=r.CUSTOM_BASES[n],i=a?.[e.wrapped.address],u=a?.[t.wrapped.address];return!i&&!u||(!i||!!i.find(e=>t.equals(e)))&&(!u||!!u.find(t=>e.equals(t)))})},eB),eF=(e,t)=>{let n=new Set;for(let t of R.default(e,({pools:e})=>e.map(el)))n.add(t);for(let e of t){let{pools:t}=e;if(!t.map(el).some(e=>n.has(e)))return e}return null};async function eL({gasPriceWei:e,poolProvider:t,quoteCurrency:n,blockNumber:a}){let{chainId:i}=n,o=eb(i);if(!o)throw Error(`No valid usd token found on chain ${i}`);let p=ew(i);if(!p)throw Error(`Unsupported chain ${i}. Native wrapped token not found.`);let s=BigInt("function"==typeof e?await e():e),[l,d]=await Promise.all([eH(t,i,a),eU(t,n,a)]);return{estimateGasCost:({pools:e},{initializedTickCrossedList:t})=>{let a=p.equals(n.wrapped),y=BigInt(Math.max(1,x.default(t))),c=new Set,m=0n;for(let t of e){let{type:e}=t;if(ea(t)){if(!c.has(e)){m+=r.BASE_SWAP_COST_V2,c.add(e);continue}m+=r.COST_PER_EXTRA_HOP_V2;continue}if(ei(t)){c.has(e)||(m+=r.BASE_SWAP_COST_V3(i),c.add(e)),m+=r.COST_PER_HOP_V3(i);continue}if(er(t)){if(!c.has(e)){m+=r.BASE_SWAP_COST_STABLE_SWAP,c.add(e);continue}m+=r.COST_PER_EXTRA_HOP_STABLE_SWAP;continue}}let T=s*(m=m+r.COST_PER_INIT_TICK(i)*y+0n*r.COST_PER_UNINIT_TICK),f=u.CurrencyAmount.fromRawAmount(p,T),b=u.CurrencyAmount.fromRawAmount(n.wrapped,0),w=u.CurrencyAmount.fromRawAmount(o,0);try{a&&(b=f),!a&&d&&(b=ed(d,p,n.wrapped).quote(f)),l&&(w=ed(l,p,o).quote(f))}catch(e){}return{gasEstimate:m,gasCostInToken:b,gasCostInUSD:w}}}}async function eU(e,t,n){let a=ew(t.chainId);return!a||t.wrapped.equals(a)?null:(await e.getCandidatePools({blockNumber:n,pairs:[[a,t]],currencyA:a,currencyB:t}))[0]??null}async function eH(e,t,n){let a=eb(t),i=ew(t);return a&&i?(await e.getCandidatePools({blockNumber:n,pairs:[[i,a]],currencyA:i,currencyB:a}))[0]??null:null}async function eW({amount:e,baseRoutes:t,distributionPercent:n,quoteProvider:a,tradeType:i,blockNumber:r,gasModel:o,quoterOptimization:p=!0}){let[s,l]=function(e,t){let n=[],a=[];for(let i=1;i<=100/t;i++)n.push(i*t),a.push(e.multiply(new u.Fraction(i*t,100)));return[n,a]}(e,n),d=l.reduce((e,n,a)=>[...e,...t.map(e=>({...e,amount:n,percent:s[a]}))],[]),y=i===u.TradeType.EXACT_INPUT?a.getRouteWithQuotesExactIn:a.getRouteWithQuotesExactOut;if(!p)return y(d,{blockNumber:r,gasModel:o});let c="undefined"==typeof window?setTimeout:window.requestIdleCallback||window.setTimeout;eE("Get quotes","from",d.length,"routes",d);let m=D.default(d,10),T=(await Promise.all(m.map(e=>new Promise((t,n)=>{c(async()=>{try{let n=await y(e,{blockNumber:r,gasModel:o});t(n)}catch(e){n(e)}})})))).reduce((e,t)=>[...e,...t],[]);return eE("Get quotes","success, got",T.length,"quoted routes",T),T}var e$={topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},eV={[u.ChainId.BSC]:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:4},[u.ChainId.BSC_TESTNET]:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:4},[u.ChainId.ETHEREUM]:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:4},[u.ChainId.GOERLI]:{topN:2,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:4}},eG={[u.ChainId.BSC]:{topN:3,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},[u.ChainId.BSC_TESTNET]:{topN:3,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},[u.ChainId.ETHEREUM]:{topN:3,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3},[u.ChainId.GOERLI]:{topN:3,topNDirectSwaps:2,topNTokenInOut:2,topNSecondHop:1,topNWithEachBaseToken:3,topNWithBaseToken:3}},ez={[u.ChainId.BSC]:{[g.bscTokens.ankr.address]:{topNTokenInOut:4},[g.bscTokens.ankrbnb.address]:{topNTokenInOut:4},[g.bscTokens.ankrETH.address]:{topNTokenInOut:4},[g.bscTokens.wbeth.address]:{topNSecondHop:3}}},eX={[u.ChainId.POLYGON_ZKEVM]:{distributionPercent:20}};async function ej(e,t,n,a){let{blockNumber:i}=a,r="function"==typeof i?await i():i,o=await eQ(e,t,n,{...a,blockNumber:r});if(!o||o.outputAmount.equalTo(u.ZERO))throw Error("Cannot find a valid swap route");let{routes:p,gasEstimateInUSD:s,gasEstimate:l,inputAmount:d,outputAmount:y}=o;return{tradeType:n,routes:p,gasEstimate:l,gasEstimateInUSD:s,inputAmount:d,outputAmount:y,blockNumber:r}}async function eQ(e,t,n,a){let{chainId:i}=t,{maxHops:o=3,maxSplits:p=4,distributionPercent:s=5,poolProvider:l,quoteProvider:d,blockNumber:y,gasPriceWei:c,allowedPoolTypes:m,quoterOptimization:T}={...a,...eX[i]||{}},f=n===u.TradeType.EXACT_INPUT,b=function(e,t,n,a=3){eE("Computing routes from",n.length,"pools");let i=Array(n.length).fill(!1),r=[],u=(e,t,o,p)=>{if(!(o.length>a)){if(o.length>0&&eu(o[o.length-1],t)){r.push(ec([...o],e,t));return}for(let a=0;a<n.length;a++){if(i[a])continue;let r=n[a],s=p||e;if(!eu(r,s))continue;let l=eo(r,s);o.push(r),i[a]=!0,u(e,t,o,l),i[a]=!1,o.pop()}}};return u(e,t,[]),eE("Computed routes from",n.length,"pools",r.length,"routes"),r}(f?e.currency:t,f?t:e.currency,await l?.getCandidatePools({currencyA:e.currency,currencyB:t,blockNumber:y,protocols:m}),o);n===u.TradeType.EXACT_OUTPUT&&(b=b.filter(({type:e})=>3!==e));let w=await eL({gasPriceWei:c,poolProvider:l,quoteCurrency:t,blockNumber:y}),h=await eW({amount:e,baseRoutes:b,distributionPercent:s,quoteProvider:d,tradeType:n,blockNumber:y,gasModel:w,quoterOptimization:T});return function(e,t,n,a,i){let o=e.currency.chainId,p=[],s={};for(let e of n)s[e.percent]||(s[e.percent]=[],p.push(e.percent)),s[e.percent].push(e);let l=function(e,t,n,a,i,{maxSplits:o=4,minSplits:p=0}){let s,l;let d=B.default(t,t=>t.sort((t,n)=>e===u.TradeType.EXACT_INPUT?i(t).greaterThan(i(n))?-1:1:i(t).lessThan(i(n))?-1:1)),y=e===u.TradeType.EXACT_INPUT?(e,t)=>e.greaterThan(t):(e,t)=>e.lessThan(t),c=e=>{let t=e[0];for(let n=1;n<e.length;n++)t=t.add(e[n]);return t},m=new M.default(Array,(e,t)=>y(e.quote,t.quote)?-1:1,3);if(!d[100]||p>1)console.log({percentToSortedQuotes:B.default(d,e=>e.length)},"Did not find a valid route without any splits. Continuing search anyway.");else for(let e of(s=i(d[100][0]),l=[d[100][0]],d[100].slice(0,5)))m.push({quote:i(e),routes:[e]});let T=new q.default;for(let e=n.length;e>=0;e--){let t=n[e];d[t]&&(T.enqueue({curRoutes:[d[t][0]],percentIndex:e,remainingPercent:100-t,special:!1}),d[t]&&d[t][1]&&T.enqueue({curRoutes:[d[t][1]],percentIndex:e,remainingPercent:100-t,special:!0}))}let f=1;for(;T.size>0;){console.log({top5:Array.from(m.consume()).map(e=>`${e.quote.toExact()} (${e.routes.map(e=>`${e.percent}% ${e.amount.toExact()} ${e.pools.map(e=>ea(e)?`V2 ${e.reserve0.currency.symbol}-${e.reserve1.currency.symbol}`:ei(e)?`V3 fee ${e.fee} ${e.token0.symbol}-${e.token1.symbol}`:`Stable ${e.balances.map(e=>e.currency).join("-")}`).join(", ")} ${e.quote.toExact()}`).join(", ")})`),onQueue:T.size},`Top 3 with ${f} splits`),m.clear();let t=T.size;if(++f>=3&&l&&l.length<f-1)break;if(f>o){console.log("Max splits reached. Stopping search.");break}for(;t>0;){t--;let{remainingPercent:a,curRoutes:r,percentIndex:o,special:b}=T.dequeue();for(let t=o;t>=0;t--){let o=n[t];if(o>a||!d[o])continue;let w=eF(r,d[o]);if(!w)continue;let h=a-o,g=[...r,w];if(0===h&&f>=p){let t=c(g.map(e=>i(e))),n=u.CurrencyAmount.fromRawAmount(t.currency,0),a=e===u.TradeType.EXACT_INPUT?t.subtract(n):t.add(n);m.push({quote:a,routes:g}),(!s||y(a,s))&&(s=a,l=g)}else T.enqueue({curRoutes:g,remainingPercent:h,percentIndex:t,special:b})}}}if(!l)return console.log("Could not find a valid swap"),null;let b=c(l.map(e=>e.quoteAdjustedForGas)),w=l.map(e=>e.gasEstimate).reduce((e,t)=>e+t,0n);if(!r.usdGasTokensByChain[a]||!r.usdGasTokensByChain[a][0])throw Error(`Could not find a USD token for computing gas costs on ${a}`);let h=r.usdGasTokensByChain[a][0],g=h.decimals,{gasCostL1USD:A,gasCostL1QuoteToken:E}={gasUsedL1:0n,gasCostL1USD:u.CurrencyAmount.fromRawAmount(h,0),gasCostL1QuoteToken:u.CurrencyAmount.fromRawAmount(l[0]?.quote.currency.wrapped,0)},S=c(l.map(e=>{let t=g-e.gasCostInUSD.currency.decimals;return 0===t?u.CurrencyAmount.fromRawAmount(h,e.gasCostInUSD.quotient):u.CurrencyAmount.fromRawAmount(h,e.gasCostInUSD.quotient*10n**BigInt(t))}));if(S.currency.equals(A.currency))S=S.add(A);else{let e=g-A.currency.decimals;S=S.add(u.CurrencyAmount.fromRawAmount(h,A.quotient*10n**BigInt(e)))}let I=c(l.map(e=>e.gasCostInToken)).add(E);return{quote:c(l.map(e=>e.quote)),quoteGasAdjusted:b=e===u.TradeType.EXACT_INPUT?b.subtract(E):b.add(E),estimatedGasUsed:w,estimatedGasUsedUSD:S,estimatedGasUsedQuoteToken:I,routes:l.sort((e,t)=>t.amount.greaterThan(e.amount)?1:-1)}}(a,s,p.sort((e,t)=>e-t),o,e=>e.quoteAdjustedForGas,i);if(!l)return null;let{routes:d}=l,y=d.reduce((e,t)=>e.add(t.amount),u.CurrencyAmount.fromRawAmount(d[0].amount.currency,0)),c=e.subtract(y);c.greaterThan(0)&&(console.log({missingAmount:c.quotient.toString()},"Optimal route's amounts did not equal exactIn/exactOut total. Adding missing amount to last route in array."),d[d.length-1].amount=d[d.length-1].amount.add(c)),console.log({routes:d,numSplits:d.length,amount:e.toExact(),quote:l.quote.toExact(),quoteGasAdjusted:l.quoteGasAdjusted.toFixed(Math.min(l.quoteGasAdjusted.currency.decimals,2)),estimatedGasUSD:l.estimatedGasUsedUSD.toFixed(Math.min(l.estimatedGasUsedUSD.currency.decimals,2)),estimatedGasToken:l.estimatedGasUsedQuoteToken.toFixed(Math.min(l.estimatedGasUsedQuoteToken.currency.decimals,2))},`Found best swap route. ${d.length} split.`);let{routes:m,quote:T,estimatedGasUsed:f,estimatedGasUsedUSD:b}=l,w=u.CurrencyAmount.fromRawAmount(t,T.quotient),h=a===u.TradeType.EXACT_INPUT;return{routes:m.map(({type:e,amount:n,quote:a,pools:i,path:r,percent:o})=>{let p=u.CurrencyAmount.fromRawAmount(t,a.quotient);return{percent:o,type:e,pools:i,path:r,inputAmount:h?n:p,outputAmount:h?p:n}}),gasEstimate:f,gasEstimateInUSD:b,inputAmount:h?e:w,outputAmount:h?w:e}}(e,t,h,n,{maxSplits:p})}function eZ(e){return async function(...t){let n=e.length;if(0===n)throw Error("No valid calls");for(let[a,{timeout:i=2e3,asyncFn:r}]of e.entries()){let e=a<n-1?function(e,t){return function(...n){return Promise.race([e(...n),new Promise((e,n)=>{setTimeout(()=>n(Error(`Request timeout ${t}ms`)),t)})])}}(r,i):r;try{return await e(...t)}catch(e){if(a===n-1)throw e;console.error("Call failed with error",e,"Try next fallback")}}throw Error("Unexpected end of call")}}function eK({id:e,getPoolMetas:t,getPoolsFromSubgraph:n}){return async function({provider:a,pairs:i}){if(!a)throw Error("No valid subgraph data provider");let r=i[0]?.[0]?.chainId;if(!r)return[];let u=a({chainId:r});if(!u)return console.error("No subgraph client found for chainId",r),[];eE(`SUBGRAPH_POOLS_START(${e})`,i);let o=new Map;for(let e of i)for(let n of t(e))o.set(n.address.toLocaleLowerCase(),n);let p=Array.from(o.keys()),s=await n({addresses:p,getPoolMetaByAddress:e=>o.get(e.toLocaleLowerCase())??null,client:u});return eE(`SUBGRAPH_POOLS_END(${e})`,s),s.filter(e=>!!e)}}var eY=v.default(([e,t,n])=>({address:l.Pool.getAddress(e.wrapped,t.wrapped,n),currencyA:e,currencyB:t,fee:n}),([e,t,n])=>{if(e.wrapped.equals(t.wrapped))return[e.chainId,e.wrapped.address,n].join("_");let[a,i]=e.wrapped.sortsBefore(t.wrapped)?[e.wrapped,t.wrapped]:[t.wrapped,e.wrapped];return[a.chainId,a.address,i.address,n].join("_")}),eJ=v.default(e=>[l.FeeAmount.LOWEST,l.FeeAmount.LOW,l.FeeAmount.MEDIUM,l.FeeAmount.HIGH].map(t=>eY([...e,t])),([e,t])=>{if(e.wrapped.equals(t.wrapped))return[e.chainId,e.wrapped.address].join("_");let[n,a]=e.wrapped.sortsBefore(t.wrapped)?[e.wrapped,t.wrapped]:[t.wrapped,e.wrapped];return[n.chainId,n.address,a.address].join("_")}),e2=A.gql`
  query getPools($pageSize: Int!, $poolAddrs: [String]) {
    pools(first: $pageSize, where: { id_in: $poolAddrs }) {
      id
      tick
      sqrtPrice
      feeTier
      liquidity
      feeProtocol
      totalValueLockedUSD
    }
  }
`,e0=eK({id:"V3",getPoolMetas:eJ,getPoolsFromSubgraph:async({addresses:e,getPoolMetaByAddress:t,client:n})=>{let{pools:a}=await n.request(e2,{pageSize:1e3,poolAddrs:e});return a.map(({id:e,liquidity:n,sqrtPrice:a,tick:i,totalValueLockedUSD:r,feeProtocol:u})=>{let o=t(e);if(!o)return null;let{fee:p,currencyA:s,currencyB:d,address:y}=o,[c,m]=s.wrapped.sortsBefore(d.wrapped)?[s,d]:[d,s],[T,f]=l.parseProtocolFees(u);return{type:1,fee:p,token0:c,token1:m,liquidity:BigInt(n),sqrtRatioX96:BigInt(a),tick:Number(i),address:y,tvlUSD:BigInt(Number.parseInt(r)),token0ProtocolFee:T,token1ProtocolFee:f}})}}),e1=A.gql`
  query getPools($pageSize: Int!, $poolAddrs: [ID!]) {
    pairs(first: $pageSize, where: { id_in: $poolAddrs }) {
      id
      reserve0
      reserve1
      reserveUSD
    }
  }
`,e6=eK({id:"V2",getPoolMetas:([e,t])=>[{currencyA:e,currencyB:t,address:es(e.wrapped,t.wrapped)}],getPoolsFromSubgraph:async({addresses:e,getPoolMetaByAddress:t,client:n})=>{let{pairs:a}=await n.request(e1,{pageSize:1e3,poolAddrs:e});return a.map(({id:e,reserveUSD:n,reserve0:a,reserve1:i})=>{let r=t(e);if(!r)return null;let{currencyA:u,currencyB:o,address:p}=r,[s,l]=u.wrapped.sortsBefore(o.wrapped)?[u,o]:[o,u],d=ee(a,s),y=ee(i,l);return d&&y?{address:p,type:0,reserve0:d,reserve1:y,tvlUSD:BigInt(Number.parseInt(n))}:null})}}),e5=A.gql`
  query getPools($pageSize: Int!, $id: String) {
    pools(first: $pageSize, where: { id_gt: $id }) {
      id
      tick
      token0 {
        symbol
        id
        decimals
      }
      token1 {
        symbol
        id
        decimals
      }
      sqrtPrice
      feeTier
      liquidity
      feeProtocol
      totalValueLockedUSD
    }
  }
`,e3=function({getPoolsFromSubgraph:e,getPoolId:t}){return async function({provider:n,chainId:a,pageSize:i=1e3}){if(!n||!a)throw Error("No valid subgraph data provider");let r=n({chainId:a});if(!r)throw Error(`No subgraph client found for chainId ${a}`);let u=!0,o="",p=[];for(;u;){let n=await e({client:r,lastId:o,pageSize:i,chainId:a});if(n.length<i){u=!1,p=[...p,...n];break}o=t(n[n.length-1]),p=[...p,...n]}return p}}({id:"getAllV3PoolsFromSubgraph",getPoolsFromSubgraph:async({lastId:e,pageSize:t,client:n,chainId:a})=>{let{pools:i}=await n.request(e5,{pageSize:t,id:e});return i.map(({id:e,liquidity:t,sqrtPrice:n,tick:i,totalValueLockedUSD:r,feeProtocol:o,token0:p,token1:s,feeTier:y})=>{let[c,m]=l.parseProtocolFees(o);return{type:1,fee:Number(y),token0:new u.Token(a,d.getAddress(p.id),Number(p.decimals),p.symbol),token1:new u.Token(a,d.getAddress(s.id),Number(s.decimals),s.symbol),liquidity:BigInt(t),sqrtRatioX96:BigInt(n),tick:Number(i),address:d.getAddress(e),tvlUSD:BigInt(Number.parseInt(r)),token0ProtocolFee:c,token1ProtocolFee:m}})},getPoolId:e=>e.address}),e4=e7({abi:r.pancakePairABI,getPossiblePoolMetas:([e,t])=>[{address:es(e.wrapped,t.wrapped),currencyA:e,currencyB:t}],buildPoolInfoCalls:e=>[{address:e,functionName:"getReserves",args:[]}],buildPool:({currencyA:e,currencyB:t},[n])=>{if(!n)return null;let[a,i]=n,[r,o]=e.wrapped.sortsBefore(t.wrapped)?[e,t]:[t,e];return{type:0,reserve0:u.CurrencyAmount.fromRawAmount(r,a.toString()),reserve1:u.CurrencyAmount.fromRawAmount(o,i.toString())}}}),e8=e7({abi:r.stableSwapPairABI,getPossiblePoolMetas:([e,t])=>r.getStableSwapPools(e.chainId).filter(({token:n,quoteToken:a})=>{let i=E.deserializeToken(n),r=E.deserializeToken(a);return i.equals(e.wrapped)&&r.equals(t.wrapped)||i.equals(t.wrapped)&&r.equals(e.wrapped)}).map(({stableSwapAddress:n})=>({address:n,currencyA:e,currencyB:t})),buildPoolInfoCalls:e=>[{address:e,functionName:"balances",args:[0]},{address:e,functionName:"balances",args:[1]},{address:e,functionName:"A",args:[]},{address:e,functionName:"fee",args:[]},{address:e,functionName:"FEE_DENOMINATOR",args:[]}],buildPool:({currencyA:e,currencyB:t,address:n},[a,i,r,o,p])=>{if(!a||!i||!r||!o||!p)return null;let[s,l]=e.wrapped.sortsBefore(t.wrapped)?[e,t]:[t,e];return{address:n,type:2,balances:[u.CurrencyAmount.fromRawAmount(s,a.toString()),u.CurrencyAmount.fromRawAmount(l,i.toString())],amplifier:BigInt(r.toString()),fee:new u.Percent(BigInt(o.toString()),BigInt(p.toString()))}}}),e9=e7({abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"int24",name:"tickLower",type:"int24"},{indexed:!0,internalType:"int24",name:"tickUpper",type:"int24"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!0,internalType:"int24",name:"tickLower",type:"int24"},{indexed:!0,internalType:"int24",name:"tickUpper",type:"int24"},{indexed:!1,internalType:"uint128",name:"amount0",type:"uint128"},{indexed:!1,internalType:"uint128",name:"amount1",type:"uint128"}],name:"Collect",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint128",name:"amount0",type:"uint128"},{indexed:!1,internalType:"uint128",name:"amount1",type:"uint128"}],name:"CollectProtocol",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!1,internalType:"uint256",name:"paid0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"paid1",type:"uint256"}],name:"Flash",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint16",name:"observationCardinalityNextOld",type:"uint16"},{indexed:!1,internalType:"uint16",name:"observationCardinalityNextNew",type:"uint16"}],name:"IncreaseObservationCardinalityNext",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{indexed:!1,internalType:"int24",name:"tick",type:"int24"}],name:"Initialize",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"int24",name:"tickLower",type:"int24"},{indexed:!0,internalType:"int24",name:"tickUpper",type:"int24"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"feeProtocol0Old",type:"uint32"},{indexed:!1,internalType:"uint32",name:"feeProtocol1Old",type:"uint32"},{indexed:!1,internalType:"uint32",name:"feeProtocol0New",type:"uint32"},{indexed:!1,internalType:"uint32",name:"feeProtocol1New",type:"uint32"}],name:"SetFeeProtocol",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"addr",type:"address"}],name:"SetLmPoolEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"int256",name:"amount0",type:"int256"},{indexed:!1,internalType:"int256",name:"amount1",type:"int256"},{indexed:!1,internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"int24",name:"tick",type:"int24"},{indexed:!1,internalType:"uint128",name:"protocolFeesToken0",type:"uint128"},{indexed:!1,internalType:"uint128",name:"protocolFeesToken1",type:"uint128"}],name:"Swap",type:"event"},{inputs:[{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"amount",type:"uint128"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"amount0Requested",type:"uint128"},{internalType:"uint128",name:"amount1Requested",type:"uint128"}],name:"collect",outputs:[{internalType:"uint128",name:"amount0",type:"uint128"},{internalType:"uint128",name:"amount1",type:"uint128"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint128",name:"amount0Requested",type:"uint128"},{internalType:"uint128",name:"amount1Requested",type:"uint128"}],name:"collectProtocol",outputs:[{internalType:"uint128",name:"amount0",type:"uint128"},{internalType:"uint128",name:"amount1",type:"uint128"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"fee",outputs:[{internalType:"uint24",name:"",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeGrowthGlobal0X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeGrowthGlobal1X128",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"flash",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"observationCardinalityNext",type:"uint16"}],name:"increaseObservationCardinalityNext",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidity",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"lmPool",outputs:[{internalType:"contract IPancakeV3LmPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLiquidityPerTick",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"observations",outputs:[{internalType:"uint32",name:"blockTimestamp",type:"uint32"},{internalType:"int56",name:"tickCumulative",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityCumulativeX128",type:"uint160"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32[]",name:"secondsAgos",type:"uint32[]"}],name:"observe",outputs:[{internalType:"int56[]",name:"tickCumulatives",type:"int56[]"},{internalType:"uint160[]",name:"secondsPerLiquidityCumulativeX128s",type:"uint160[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"positions",outputs:[{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"protocolFees",outputs:[{internalType:"uint128",name:"token0",type:"uint128"},{internalType:"uint128",name:"token1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"feeProtocol0",type:"uint32"},{internalType:"uint32",name:"feeProtocol1",type:"uint32"}],name:"setFeeProtocol",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_lmPool",type:"address"}],name:"setLmPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"slot0",outputs:[{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"},{internalType:"int24",name:"tick",type:"int24"},{internalType:"uint16",name:"observationIndex",type:"uint16"},{internalType:"uint16",name:"observationCardinality",type:"uint16"},{internalType:"uint16",name:"observationCardinalityNext",type:"uint16"},{internalType:"uint32",name:"feeProtocol",type:"uint32"},{internalType:"bool",name:"unlocked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"}],name:"snapshotCumulativesInside",outputs:[{internalType:"int56",name:"tickCumulativeInside",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityInsideX128",type:"uint160"},{internalType:"uint32",name:"secondsInside",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"bool",name:"zeroForOne",type:"bool"},{internalType:"int256",name:"amountSpecified",type:"int256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[{internalType:"int256",name:"amount0",type:"int256"},{internalType:"int256",name:"amount1",type:"int256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int16",name:"",type:"int16"}],name:"tickBitmap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tickSpacing",outputs:[{internalType:"int24",name:"",type:"int24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int24",name:"",type:"int24"}],name:"ticks",outputs:[{internalType:"uint128",name:"liquidityGross",type:"uint128"},{internalType:"int128",name:"liquidityNet",type:"int128"},{internalType:"uint256",name:"feeGrowthOutside0X128",type:"uint256"},{internalType:"uint256",name:"feeGrowthOutside1X128",type:"uint256"},{internalType:"int56",name:"tickCumulativeOutside",type:"int56"},{internalType:"uint160",name:"secondsPerLiquidityOutsideX128",type:"uint160"},{internalType:"uint32",name:"secondsOutside",type:"uint32"},{internalType:"bool",name:"initialized",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],getPossiblePoolMetas:([e,t])=>{let n=l.DEPLOYER_ADDRESSES[e.chainId];return n?[l.FeeAmount.LOWEST,l.FeeAmount.LOW,l.FeeAmount.MEDIUM,l.FeeAmount.HIGH].map(a=>({address:ep({deployerAddress:n,tokenA:e.wrapped,tokenB:t.wrapped,fee:a}),currencyA:e,currencyB:t,fee:a})):[]},buildPoolInfoCalls:e=>[{address:e,functionName:"liquidity"},{address:e,functionName:"slot0"}],buildPool:({currencyA:e,currencyB:t,fee:n,address:a},[i,r])=>{if(!i||!r)return null;let[u,o,,,,p]=r,[s,d]=e.wrapped.sortsBefore(t.wrapped)?[e,t]:[t,e],[y,c]=l.parseProtocolFees(p);return{type:1,token0:s,token1:d,fee:n,liquidity:BigInt(i.toString()),sqrtRatioX96:BigInt(u.toString()),tick:Number(o),address:a,token0ProtocolFee:y,token1ProtocolFee:c}}});function e7({abi:e,getPossiblePoolMetas:t,buildPoolInfoCalls:n,buildPool:a}){return async function(i,r,u){if(!r)throw Error("No valid onchain data provider");let o=i[0]?.[0]?.chainId,p=r({chainId:o});if(!o||!p)return[];let s=new Set,l=[];for(let e of i)for(let n of t(e))s.has(n.address)||(l.push(n),s.add(n.address));let d=[],y=0;for(let{address:e}of l){let t=n(e);if(y||(y=t.length),!y||y!==t.length)throw Error("Inconsistent pool data call");d=[...d,...t]}if(!d.length)return[];let c=await p.multicall({contracts:d.map(t=>({abi:e,address:t.address,functionName:t.functionName,args:t.args})),allowFailure:!0,blockNumber:u?BigInt(Number(BigInt(u))):void 0}),m=[];for(let e=0;e<l.length;e+=1){let t=c.slice(e*y,(e+1)*y),n=a(l[e],t.map(e=>e.result));n&&m.push(n)}return m}}var te=A.gql`
  query getTokens($pageSize: Int!, $tokenAddrs: [ID!]) {
    tokens(first: $pageSize, where: { id_in: $tokenAddrs }) {
      id
      derivedUSD
    }
  }
`;function tt(e){return async function({currencyA:t,currencyB:n,...a}){let i=ex(t,n);if(!i)return null;let r=new Map,u={},o=i.map(e=>{let t=e.address.toLocaleLowerCase();return u[t]=e,t});for(let{address:n,priceUSD:i}of(await e({addresses:o,chainId:t?.chainId,...a}))){let e=u[n];e&&r.set(e.wrapped.address,parseFloat(i)||0)}return r}}var tn=tt(async({addresses:e,chainId:t,provider:n})=>{let a=n?.({chainId:t});if(!a)throw Error("No valid subgraph data provider");let{tokens:i}=await a.request(te,{pageSize:1e3,tokenAddrs:e});return i.map(({id:e,derivedUSD:t})=>({address:e,priceUSD:t}))}),ta=tt((()=>{let e=new Map;return async({addresses:t,chainId:n})=>{if(!n||!r.CHAIN_ID_TO_CHAIN_NAME[n])throw Error(`Invalid chain id ${n}`);let[a,i]=t.reduce(([t,n],a)=>{let i=e.get(a.toLocaleLowerCase());return i?t.push(i):n.push(a),[t,n]},[[],[]]);if(!i.length)return a;let u=i.map(e=>`${r.CHAIN_ID_TO_CHAIN_NAME[n]}:${e}`).join(","),{coins:o={}}=await fetch(`https://coins.llama.fi/prices/current/${u}`).then(e=>e.json());return[...a,...Object.entries(o).map(([t,n])=>{let[,a]=t.split(":"),i={address:a,priceUSD:n.price};return e.set(a.toLocaleLowerCase(),i),i})]}})()),ti=eZ([{asyncFn:({currencyA:e,currencyB:t,v3SubgraphProvider:n})=>tn({currencyA:e,currencyB:t,provider:n}),timeout:3e3},{asyncFn:({currencyA:e,currencyB:t})=>ta({currencyA:e,currencyB:t})}]);function tr(e,t){if(!t)return e;let n={...e};for(let e of Object.keys(n))n[e]=Math.max(n[e],t[e]||0);return n}function tu(e,t){return function(n,a){let i=n?.chainId;if(!i||!e[i])return e$;let r=t[i]?.[n?.wrapped?.address||"0x"],u=t[i]?.[a?.wrapped?.address||"0x"];return tr(tr(e[i],r),u)}}var to=tu(eV,ez),tp=tu(eG,{}),ts=(e,t)=>e.tvlUSD>=t.tvlUSD?-1:1;function tl({getPoolSelectorConfig:e,getToken0:t,getToken1:n,getPoolAddress:a}){return function(i,o,p){let s=e(i,o);if(!i||!o||!p.length)return[];let l=p.sort(ts),{chainId:d}=t(l[0]),y=r.BASES_TO_CHECK_TRADES_AGAINST[d]??[],c=new Set,m=e=>{for(let t of e)c.add(a(t))},T=y.map(e=>l.filter(a=>t(a).wrapped.equals(e)&&n(a).wrapped.equals(i.wrapped)||n(a).wrapped.equals(e)&&t(a).wrapped.equals(i.wrapped)).sort(ts).slice(0,s.topNWithEachBaseToken)).reduce((e,t)=>[...e,...t],[]).sort(ts).slice(0,s.topNWithBaseToken);m(T);let f=y.map(e=>l.filter(i=>!c.has(a(i))&&(t(i).wrapped.equals(e)&&n(i).wrapped.equals(o.wrapped)||n(i).wrapped.equals(e)&&t(i).wrapped.equals(o.wrapped))).sort(ts).slice(0,s.topNWithEachBaseToken)).reduce((e,t)=>[...e,...t],[]).sort(ts).slice(0,s.topNWithBaseToken);m(f);let b=l.filter(e=>!c.has(a(e))&&(t(e).wrapped.equals(i.wrapped)&&n(e).wrapped.equals(o.wrapped)||n(e).wrapped.equals(i.wrapped)&&t(e).wrapped.equals(o.wrapped))).slice(0,s.topNDirectSwaps);m(b);let w=u.WNATIVE[d],h=w?l.filter(e=>!c.has(a(e))&&(t(e).wrapped.equals(w)&&n(e).wrapped.equals(i.wrapped)||n(e).wrapped.equals(w)&&t(e).wrapped.equals(i.wrapped))).slice(0,1):[];m(h);let g=w?l.filter(e=>!c.has(a(e))&&(t(e).wrapped.equals(w)&&n(e).wrapped.equals(o.wrapped)||n(e).wrapped.equals(w)&&t(e).wrapped.equals(o.wrapped))).slice(0,1):[];m(g);let A=l.slice(0,s.topN).filter(e=>!c.has(a(e)));m(A);let E=l.filter(e=>!c.has(a(e))&&(t(e).wrapped.equals(i.wrapped)||n(e).wrapped.equals(i.wrapped))).slice(0,s.topNTokenInOut);m(E);let S=l.filter(e=>!c.has(a(e))&&(t(e).wrapped.equals(o.wrapped)||n(e).wrapped.equals(o.wrapped))).slice(0,s.topNTokenInOut);m(S);let I=(e,i)=>e.map(e=>t(e).wrapped.equals(i.wrapped)?n(e):t(e)).map(e=>l.filter(i=>!c.has(a(i))&&(t(i).wrapped.equals(e.wrapped)||n(i).wrapped.equals(e.wrapped))).slice(0,s.topNSecondHop)).reduce((e,t)=>[...e,...t],[]).sort(ts).slice(0,s.topNSecondHop),P=I([...E,...T],i);m(P);let k=I([...S,...f],o);return m(k),[...T,...f,...b,...h,...g,...A,...E,...S,...P,...k].map(({tvlUSD:e,...t})=>t)}}var td=tl({getPoolSelectorConfig:to,getToken0:e=>e.token0,getToken1:e=>e.token1,getPoolAddress:e=>e.address}),ty=tl({getPoolSelectorConfig:tp,getToken0:e=>e.reserve0.currency,getToken1:e=>e.reserve1.currency,getPoolAddress:e=>el(e)||"0x"});async function tc({currencyA:e,currencyB:t,pairs:n,onChainProvider:a,v3SubgraphProvider:i,blockNumber:r}){let o=n||eD(e,t),[p,s]=await Promise.all([e4(o,a,r),ti({currencyA:e,currencyB:t,v3SubgraphProvider:i})]);if(!p)throw Error("Failed to get v2 candidate pools");return s?p.map(e=>{let t=t=>{if(t.equalTo(u.ZERO))return 0;let n=s.get(t.currency.wrapped.address);if(void 0!==n)return parseFloat(t.toExact())*n;let a=e.reserve0.currency.equals(t.currency)?e.reserve1:e.reserve0;if(s.get(a.currency.wrapped.address)){let e=new u.Price({baseAmount:t,quoteAmount:a});return parseFloat(t.toExact())*parseFloat(function(e,t){if(e)return function(e,t=6){return e&&0n!==e.denominator?e.greaterThan(10n**BigInt(t))?e.toFixed(0):e.toSignificant(t):void 0}(e?.asFraction.multiply(e?.scalar),6)}(e,0)||"0")}return 0};return{...e,tvlUSD:BigInt(Math.floor(t(e.reserve0)+t(e.reserve1))),address:el(e)}}):(console.debug("Failed to get base token prices"),p.map(e=>({...e,tvlUSD:BigInt(0),address:el(e)})))}async function tm(e){let{v2SubgraphProvider:t,currencyA:n,currencyB:a,pairs:i}=e,r=i||eD(n,a),u=eZ([{asyncFn:()=>tc(e),timeout:3e3},{asyncFn:()=>e6({provider:t,pairs:r})}]);return ty(n,a,await u())}var tT=v.default((e,t)=>{let n=e.find(e=>e.address===t);return n?.tvlUSD||0n},(e,t)=>t),tf=e=>async function(t){let{currencyA:n,currencyB:a,pairs:i,onChainProvider:r,blockNumber:u}=t,o=i||eD(n,a),[p,s]=await Promise.allSettled([e9(o,r,u),e(t)]);if("fulfilled"===p.status&&"fulfilled"===s.status){let{value:e}=p,{value:t}=s;if(!Array.isArray(t))throw Error("Failed to get tvl references");return e.map(e=>{let n=BigInt(tT(t,e.address));return{...e,tvlUSD:n}})}throw Error(`Getting v3 pools failed. Onchain ${p.status}, tvl references ${s.status}`)},tb=tf(e=>{let{currencyA:t,currencyB:n,pairs:a,subgraphProvider:i}=e;return e0({provider:i,pairs:a||eD(t,n)})}),tw=tf((()=>{let e=new Map;return async t=>{let{currencyA:n}=t;if(!n?.chainId)throw Error(`Cannot get tvl references at chain ${n?.chainId}`);let a=e.get(n.chainId);if(a)return a;let i=await fetch(`https://routing-api.pancakeswap.com/v0/v3-pools-tvl/${n.chainId}`),r=await i.json();return e.set(n.chainId,r),r}})()),th=tf(()=>Promise.resolve([]));async function tg(e){let{currencyA:t,currencyB:n,pairs:a,subgraphProvider:i,subgraphFallback:r=!0,subgraphCacheFallback:u=!0,staticFallback:o=!0,fallbackTimeout:p=3e3}=e,s=a||eD(t,n),l=[{asyncFn:()=>tb(e),timeout:p}];u&&l.push({asyncFn:()=>tw(e),timeout:p}),r&&l.push({asyncFn:()=>e0({provider:i,pairs:s}),timeout:p}),o&&l.push({asyncFn:()=>th(e)});let d=eZ(l);return td(t,n,await d())}async function tA(e){let{onChainProvider:t,currencyA:n,currencyB:a,pairs:i,blockNumber:r}=e;return e8(i||eD(n,a),t,r)}async function tE({protocols:e=[1,0,2],v2SubgraphProvider:t,v3SubgraphProvider:n,...a}){let{currencyA:i}=a;return i?.chainId?(await Promise.all(e.map(e=>0===e?tm({...a,v2SubgraphProvider:t,v3SubgraphProvider:n}):1===e?tg({...a,subgraphProvider:n}):tA(a)))).reduce((e,t)=>[...e,...t],[]):[]}function tS(e){let t=[0,2,1];return{getCandidatePools:async({protocols:n=t,pairs:a})=>{if(!e)return[];if(!a)return e.filter(e=>n.includes(e.type));let i=[];for(let[t,r]of a)for(let a of e)eu(a,t)&&eu(a,r)&&n.includes(a.type)&&i.push(a);return i}}}function tI(e){return function({onChainProvider:e,v2SubgraphProvider:t,v3SubgraphProvider:n}){return{getCandidatePools:async a=>tE({...a,onChainProvider:e,v2SubgraphProvider:t,v3SubgraphProvider:n})}}(e)}function tP(){let e=(e=!0)=>{let t=function(e=!0){return function({reserve0:t,reserve1:n},a){let i=new u.Pair(t.wrapped,n.wrapped),[r]=e?i.getOutputAmount(a.wrapped):i.getInputAmount(a.wrapped);return r}}(e),n=function(e=!0){let t=e?Q:K;return function(e,n){let{amplifier:a,balances:i,fee:r}=e;return t({amount:n,balances:i,amplifier:a,outputCurrency:eo(e,n.currency),fee:r})}}(e),a=function(e=!0){return async function(t,n){let{token0:a,token1:i,fee:r,sqrtRatioX96:u,liquidity:o,ticks:p,tick:s}=t;if(!p?.length)return null;try{let t=new l.Pool(a.wrapped,i.wrapped,r,u,o,s,p),[d,y]=e?await t.getOutputAmount(n.wrapped):await t.getInputAmount(n.wrapped);if(d.quotient<=0n)return null;let{tickCurrent:c}=y,m=l.TickList.countInitializedTicksCrossed(p,s,c);return{quote:d,numOfTicksCrossed:m}}catch(e){return null}}}(e),i=(t,n)=>e?t.subtract(n):t.add(n);return async function(r,{gasModel:o}){let p=[];for(let s of r)try{let{pools:r,amount:l}=s,d=l,y=Array(r.length).fill(0),c=!0;for(let[i,o]of function*(t){let n=e?0:t.length-1,a=()=>e?n<t.length:n>=0;for(;a();)yield[t[n],n],e?n+=1:n-=1}(r)){if(ea(i)){d=t(i,d);continue}if(er(i)){d=n(i,d);continue}if(ei(i)){let e=await a(i,d);if(!e||e.quote.quotient===u.ZERO){c=!1;break}let{quote:t,numOfTicksCrossed:n}=e;d=t,y[o]=n}}if(!c)continue;let{gasEstimate:m,gasCostInUSD:T,gasCostInToken:f}=o.estimateGasCost({...s,quote:d},{initializedTickCrossedList:y});p.push({...s,quote:d,quoteAdjustedForGas:i(d,f),gasEstimate:m,gasCostInUSD:T,gasCostInToken:f})}catch(e){}return p}};return{getRouteWithQuotesExactIn:e(!0),getRouteWithQuotesExactOut:e(!1)}}var tk=[{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct PancakeInterfaceMulticall.Call[]",name:"calls",type:"tuple[]"}],name:"multicall",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{components:[{internalType:"bool",name:"success",type:"bool"},{internalType:"uint256",name:"gasUsed",type:"uint256"},{internalType:"bytes",name:"returnData",type:"bytes"}],internalType:"struct PancakeInterfaceMulticall.Result[]",name:"returnData",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"}],tC=class{},t_={[u.ChainId.ETHEREUM]:"0xac1cE734566f390A94b00eb9bf561c2625BF44ea",[u.ChainId.GOERLI]:"0x3D00CdB4785F0ef20C903A13596e0b9B2c652227",[u.ChainId.BSC]:"0xac1cE734566f390A94b00eb9bf561c2625BF44ea",[u.ChainId.BSC_TESTNET]:"0x3D00CdB4785F0ef20C903A13596e0b9B2c652227",[u.ChainId.ARBITRUM_ONE]:"0xac1cE734566f390A94b00eb9bf561c2625BF44ea",[u.ChainId.ARBITRUM_GOERLI]:"0x7a7e95c0b4d0Be710648C6f773ad0499923560bA",[u.ChainId.POLYGON_ZKEVM]:"0xac1cE734566f390A94b00eb9bf561c2625BF44ea",[u.ChainId.POLYGON_ZKEVM_TESTNET]:"0x5DCC00121b4a481D8EDF9782Df6c6CF398AF20B8",[u.ChainId.ZKSYNC]:"0x",[u.ChainId.ZKSYNC_TESTNET]:"0xA47DDFb5D068bFaa8ceb7476A60d5C3Fb87E58D9",[u.ChainId.LINEA_TESTNET]:"0x32226588378236Fd0c7c4053999F88aC0e5cAc77"},tO=class extends tC{constructor(e,t,n=1e6){if(super(),this.chainId=e,this.provider=t,this.gasLimitPerCall=n,!t_[this.chainId])throw Error(`No address for Pancakeswap Multicall Contract on chain id: ${e}`);this.provider=t}async callSameFunctionOnMultipleContracts(e){let{addresses:t,functionName:n,functionParams:a,providerConfig:i,abi:r}=e,u=i?.blockNumber??void 0,o=d.encodeFunctionData({abi:r,functionName:n,args:a}),p=t.map(e=>({target:e,callData:o,gasLimit:BigInt(this.gasLimitPerCall)})),{result:[s,l]}=await this.provider.simulateContract({abi:tk,address:t_[this.chainId],functionName:"multicall",args:[p],blockNumber:u?"object"==typeof u&&"function"==typeof u.then?BigInt(Number(await u)):BigInt(Number(u)):void 0}),y=[];for(let e=0;e<l.length;e++){let{success:t,returnData:a}=l[e];if(!t||a.length<=2){y.push({success:!1,returnData:a});continue}y.push({success:!0,result:d.decodeFunctionResult({abi:r,functionName:n,data:a})})}return{blockNumber:s,results:y}}async callSameFunctionOnContractWithMultipleParams(e){let{address:t,functionName:n,functionParams:a,additionalConfig:i,providerConfig:r,abi:u}=e,o=i?.gasLimitPerCallOverride??this.gasLimitPerCall,p=r?.blockNumber??void 0,s=a.map(e=>({target:t,callData:d.encodeFunctionData({abi:u,functionName:n,args:e}),gasLimit:BigInt(o)})),{result:[l,y]}=await this.provider.simulateContract({abi:tk,address:t_[this.chainId],functionName:"multicall",args:[s],blockNumber:p?BigInt(Number(p)):void 0}),c=[],m=[];for(let e=0;e<y.length;e++){let{success:t,returnData:a,gasUsed:i}=y[e];if(!t||a.length<=2){c.push({success:!1,returnData:a});continue}m.push(Number(i)),c.push({success:!0,result:d.decodeFunctionResult({abi:u,functionName:n,data:a})})}return{blockNumber:l,results:c,approxGasUsedPerSuccessCall:L.default.percentile(m,99)}}async callMultipleFunctionsOnSameContract(e){let{address:t,functionNames:n,functionParams:a,additionalConfig:i,providerConfig:r,abi:u}=e,o=i?.gasLimitPerCallOverride??this.gasLimitPerCall,p=r?.blockNumber??void 0,s=n.map((e,n)=>({target:t,callData:d.encodeFunctionData({abi:u,functionName:e,args:a?a[n]:[]}),gasLimit:BigInt(o)})),{result:[l,y]}=await this.provider.simulateContract({abi:tk,address:t_[this.chainId],functionName:"multicall",args:[s],blockNumber:p?BigInt(Number(p)):void 0}),c=[],m=[];for(let e=0;e<y.length;e++){let{success:t,returnData:a,gasUsed:i}=y[e];if(!t||a.length<=2){c.push({success:!1,returnData:a});continue}m.push(Number(i)),c.push({success:!0,result:d.decodeFunctionResult({abi:u,data:a,functionName:n[e]})})}return{blockNumber:l,results:c,approxGasUsedPerSuccessCall:L.default.percentile(m,99)}}};tO.abi=tk;var tv={[u.ChainId.BSC_TESTNET]:.1,[u.ChainId.BSC]:.1,[u.ChainId.ETHEREUM]:.1,[u.ChainId.GOERLI]:.1,[u.ChainId.ARBITRUM_ONE]:.1,[u.ChainId.ARBITRUM_GOERLI]:.1,[u.ChainId.POLYGON_ZKEVM]:.01,[u.ChainId.POLYGON_ZKEVM_TESTNET]:0,[u.ChainId.ZKSYNC]:.1,[u.ChainId.ZKSYNC_TESTNET]:.1,[u.ChainId.LINEA_TESTNET]:.1},tN={[u.ChainId.BSC_TESTNET]:3,[u.ChainId.BSC]:3,[u.ChainId.ETHEREUM]:1,[u.ChainId.GOERLI]:1,[u.ChainId.ARBITRUM_ONE]:5,[u.ChainId.ARBITRUM_GOERLI]:5,[u.ChainId.POLYGON_ZKEVM]:1,[u.ChainId.POLYGON_ZKEVM_TESTNET]:1,[u.ChainId.ZKSYNC]:3,[u.ChainId.ZKSYNC_TESTNET]:3,[u.ChainId.LINEA_TESTNET]:3},tM=class extends Error{constructor(){super(...arguments),this.name="BlockConflictError"}},tq=class extends Error{constructor(){super(...arguments),this.name="SuccessRateError"}},tR=class extends Error{constructor(){super(...arguments),this.name="ProviderBlockHeaderError"}},tB=class extends Error{constructor(){super(...arguments),this.name="ProviderTimeoutError"}},tx=class extends Error{constructor(){super(...arguments),this.name="ProviderGasError"}},tD=()=>{let e=[];return{shouldRetry:t=>e.every(e=>e.name!==t.name),onRetry:t=>{e.push(t)},getErrorsOnPreviousRetries:()=>e}};function tF({getQuoteFunctionName:e,getQuoterAddress:t,abi:n,getCallInputs:a}){return function({onChainProvider:i,multicallConfigs:o}){let p=(p=!0)=>{let s=e(p),l=(e,t)=>p?e.subtract(t):e.add(t);return async function(e,{blockNumber:d,gasModel:y}){if(!e.length)return[];let{amount:{currency:{chainId:c}}}=e[0],m=t(c),T=tv[c],f=tN[c],b=o?.[c]||r.BATCH_MULTICALL_CONFIGS[c]||r.BATCH_MULTICALL_CONFIGS[u.ChainId.ETHEREUM],{defaultConfig:{multicallChunk:w,gasLimitOverride:h}}=b,g=i({chainId:c}),A={blockNumber:d},E=new tO(c,g,h),S=e.map(e=>a(e,p)),{shouldRetry:I,onRetry:P}=tD();async function k({multicallGasLimit:e,multicallChunkSize:t}){let a=Math.ceil(S.length/Math.ceil(S.length/t)),i=D.default(S,a);try{let t=await Promise.all(i.map(t=>E.callSameFunctionOnContractWithMultipleParams({address:m,abi:n,functionName:s,functionParams:t,providerConfig:A,additionalConfig:{gasLimitPerCallOverride:e}}))),a=t.reduce((e,t)=>[...e,...t.results],[]),r=function(e,t){let n=e.length,a=1*e.filter(e=>e.success).length/n;if(a<t)return new tq(`Quote success rate below threshold of ${t}: ${a}`)}(a,T);if(r)throw r;let u=t.filter(({results:e})=>e.some(({success:e})=>e)),o=function(e,t=1){if(e.length<=1)return null;let n=e.map(e=>e.blockNumber).map(e=>e.toString()),a=U.default(n);return a.length>0&&a.length<=t?null:new tM(`Quotes returned from different blocks. ${a}`)}(u,f);if(o)throw o;return{results:a,blockNumber:BigInt(u[0]?.blockNumber),approxGasUsedPerSuccessCall:L.default.percentile(u.map(e=>e.approxGasUsedPerSuccessCall),100)}}catch(t){if(t instanceof tq||t instanceof tM)throw t;let e=t.message.slice(0,500);if(t.message.includes("header not found"))throw new tR(e);if(t.message.includes("timeout"))throw new tB(`Request had ${S.length} inputs. ${e}`);if(t.message.includes("out of gas"))throw new tx(e);throw Error(`Unknown error from provider: ${e}`)}}let C=await F.default(async e=>{try{return await k({multicallChunkSize:w,multicallGasLimit:h})}catch(n){let t=n instanceof Error?n:Error(`Unexpected error type ${n}`);if(!I(t))return e(t);if(t instanceof tq){P(t);let{successRateFailureOverrides:e}=b;return k({multicallChunkSize:e.multicallChunk,multicallGasLimit:e.gasLimitOverride})}if(t instanceof tx){P(t);let{gasErrorFailureOverride:e}=b;return k({multicallChunkSize:e.multicallChunk,multicallGasLimit:e.gasLimitOverride})}throw t}},{retries:2,minTimeout:25,maxTimeout:250});if(!C)throw Error(`Unexpected empty quote result ${C}`);let{results:_}=C;return function(e,t,n,a){let i=[];for(let r=0;r<e.length;r+=1){let o=t[r],p=e[r];if(!p)continue;let{success:s}=p;if(!s)continue;let l=function({input:e,output:t},n){return n.equals(e)?t:e}(o,o.amount.currency),d=u.CurrencyAmount.fromRawAmount(l.wrapped,p.result[0].toString()),{gasEstimate:y,gasCostInToken:c,gasCostInUSD:m}=n.estimateGasCost({...o,quote:d},{initializedTickCrossedList:p.result[2]});i.push({...o,quote:d,quoteAdjustedForGas:a(d,c),gasEstimate:y,gasCostInToken:c,gasCostInUSD:m})}return i}(_,e,y,l)}};return{getRouteWithQuotesExactIn:p(!0),getRouteWithQuotesExactOut:p(!1)}}}var tL=tF({getQuoterAddress:e=>r.MIXED_ROUTE_QUOTER_ADDRESSES[e],getQuoteFunctionName:()=>"quoteExactInput",abi:[{inputs:[{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_factoryV2",type:"address"},{internalType:"address",name:"_factoryStable",type:"address"},{internalType:"address",name:"_WETH9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"deployer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factoryStable",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factoryV2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int256",name:"amount0Delta",type:"int256"},{internalType:"int256",name:"amount1Delta",type:"int256"},{internalType:"bytes",name:"path",type:"bytes"}],name:"pancakeV3SwapCallback",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256[]",name:"flag",type:"uint256[]"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"v3SqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"v3InitializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"v3SwapGasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"flag",type:"uint256"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleStableParams",name:"params",type:"tuple"}],name:"quoteExactInputSingleStable",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV2Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV2",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IMixedRouteQuoterV1.QuoteExactInputSingleV3Params",name:"params",type:"tuple"}],name:"quoteExactInputSingleV3",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],getCallInputs:(e,t)=>[ef(e,!t),e.pools.map(e=>{if(ei(e))return 0;if(ea(e))return 1;if(er(e)){if(2===e.balances.length)return 2;if(3===e.balances.length)return 3}return -1}).filter(e=>e>=0),`0x${e.amount.quotient.toString(16)}`]}),tU=tF({getQuoterAddress:e=>r.V3_QUOTER_ADDRESSES[e],getQuoteFunctionName:e=>e?"quoteExactInput":"quoteExactOutput",abi:[{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"quoteExactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactInputSingleParams",name:"params",type:"tuple"}],name:"quoteExactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint256",name:"amountOut",type:"uint256"}],name:"quoteExactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160[]",name:"sqrtPriceX96AfterList",type:"uint160[]"},{internalType:"uint32[]",name:"initializedTicksCrossedList",type:"uint32[]"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IQuoterV2.QuoteExactOutputSingleParams",name:"params",type:"tuple"}],name:"quoteExactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint160",name:"sqrtPriceX96After",type:"uint160"},{internalType:"uint32",name:"initializedTicksCrossed",type:"uint32"},{internalType:"uint256",name:"gasEstimate",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],getCallInputs:(e,t)=>[ef(e,!t),`0x${e.amount.quotient.toString(16)}`]});function tH({onChainProvider:e,multicallConfigs:t}){let n=tP(),a=tL({onChainProvider:e,multicallConfigs:t}),i=tU({onChainProvider:e,multicallConfigs:t}),r=(e=!0)=>{let t=e?n.getRouteWithQuotesExactIn:n.getRouteWithQuotesExactOut,r=e?a.getRouteWithQuotesExactIn:a.getRouteWithQuotesExactOut,u=e?i.getRouteWithQuotesExactIn:i.getRouteWithQuotesExactOut;return async function(e,{blockNumber:n,gasModel:a}){let i=[],o=[],p=[];for(let t of e){if(0===t.type||2===t.type){p.push(t);continue}if(1===t.type){i.push(t);continue}let{pools:e}=t;if(e.some(e=>ei(e))){o.push(t);continue}p.push(t)}let s=await Promise.allSettled([t(p,{blockNumber:n,gasModel:a}),r(o,{blockNumber:n,gasModel:a}),u(i,{blockNumber:n,gasModel:a})]);if(s.every(e=>"rejected"===e.status))throw Error(s.map(e=>e.reason).join(","));return s.filter(e=>"fulfilled"===e.status).reduce((e,t)=>[...e,...t.value],[])}};return{getRouteWithQuotesExactIn:r(!0),getRouteWithQuotesExactOut:r(!1)}}var tW={};r.__export(tW,{zPools:()=>t0,zRouterGetParams:()=>t1,zRouterPostParams:()=>t6});var t$=k.z.nativeEnum(u.ChainId),tV=k.z.nativeEnum(l.FeeAmount),tG=k.z.nativeEnum(u.TradeType),tz=k.z.nativeEnum(et),tX=k.z.array(tz),tj=k.z.custom(e=>/^0x[a-fA-F0-9]{40}$/.test(e)),tQ=k.z.string().regex(/^[0-9]+$/),tZ=k.z.object({address:tj,decimals:k.z.number(),symbol:k.z.string()}).required(),tK=k.z.object({currency:tZ.required(),value:tQ}).required(),tY=k.z.object({type:tz,reserve0:tK,reserve1:tK}).required(),tJ=k.z.object({type:tz,token0:tZ,token1:tZ,fee:tV,liquidity:tQ,sqrtRatioX96:tQ,tick:k.z.number(),address:tj,token0ProtocolFee:k.z.string(),token1ProtocolFee:k.z.string()}).required(),t2=k.z.object({type:tz,balances:k.z.array(tK),amplifier:tQ,fee:k.z.string()}).required(),t0=k.z.array(k.z.union([tY,tJ,t2])),t1=k.z.object({chainId:t$,tradeType:tG,amount:tK,currency:tZ,gasPriceWei:tQ.optional(),maxHops:k.z.number().optional(),maxSplits:k.z.number().optional(),blockNumber:tQ.optional(),poolTypes:tX.optional()}).required({chainId:!0,tradeType:!0,amount:!0,currency:!0,candidatePools:!0}),t6=k.z.object({chainId:t$,tradeType:tG,amount:tK,currency:tZ,candidatePools:t0,gasPriceWei:tQ.optional(),maxHops:k.z.number().optional(),maxSplits:k.z.number().optional(),blockNumber:tQ.optional(),poolTypes:tX.optional()}).required({chainId:!0,tradeType:!0,amount:!0,currency:!0,candidatePools:!0}),t5=class{constructor(){}static encodeApproveMax(e){return d.encodeFunctionData({abi:t5.ABI,functionName:"approveMax",args:[e.address]})}static encodeApproveMaxMinusOne(e){return d.encodeFunctionData({abi:t5.ABI,functionName:"approveMaxMinusOne",args:[e.address]})}static encodeApproveZeroThenMax(e){return d.encodeFunctionData({abi:t5.ABI,functionName:"approveZeroThenMax",args:[e.address]})}static encodeApproveZeroThenMaxMinusOne(e){return d.encodeFunctionData({abi:t5.ABI,functionName:"approveZeroThenMaxMinusOne",args:[e.address]})}static encodeCallPositionManager(e){if(_.default(e.length>0,"NULL_CALLDATA"),1===e.length)return d.encodeFunctionData({abi:t5.ABI,functionName:"callPositionManager",args:e});let t=d.encodeFunctionData({abi:l.NonfungiblePositionManager.ABI,functionName:"multicall",args:[e]});return d.encodeFunctionData({abi:t5.ABI,functionName:"callPositionManager",args:[t]})}static encodeAddLiquidity(e,t,n,a){let{amount0:i,amount1:r}=e.mintAmountsWithSlippage(a);return(t.amount0.quotient<i&&(i=t.amount0.quotient),t.amount1.quotient<r&&(r=t.amount1.quotient),Object.keys(n).some(e=>"recipient"===e))?d.encodeFunctionData({abi:t5.ABI,functionName:"mint",args:[{token0:e.pool.token0.address,token1:e.pool.token1.address,fee:e.pool.fee,tickLower:e.tickLower,tickUpper:e.tickUpper,amount0Min:i,amount1Min:r,recipient:n.recipient}]}):d.encodeFunctionData({abi:t5.ABI,functionName:"increaseLiquidity",args:[{token0:e.pool.token0.address,token1:e.pool.token1.address,amount0Min:i,amount1Min:r,tokenId:BigInt(n.tokenId)}]})}static encodeApprove(e,t){switch(t){case 1:return t5.encodeApproveMax(e.wrapped);case 2:return t5.encodeApproveMaxMinusOne(e.wrapped);case 3:return t5.encodeApproveZeroThenMax(e.wrapped);case 4:return t5.encodeApproveZeroThenMaxMinusOne(e.wrapped);default:throw Error("Error: invalid ApprovalType")}}};t5.ABI=[{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"callPositionManager",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getApprovalType",outputs:[{internalType:"enum IApproveAndCall.ApprovalType",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"}],internalType:"struct IApproveAndCall.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],internalType:"struct IApproveAndCall.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"}];var t3=class{constructor(){}static encodeMulticall(e,t){if(void 0===t)return l.Multicall.encodeMulticall(e);if(Array.isArray(e)||(e=[e]),"string"==typeof t&&t.startsWith("0x")){let n=function(e){if(!e.match(/^0x[0-9a-fA-F]{64}$/))throw Error(`${e} is not valid bytes32.`);return e.toLowerCase()}(t);return d.encodeFunctionData({abi:t3.ABI,functionName:"multicall",args:[n,e]})}let n=BigInt(t);return d.encodeFunctionData({abi:t3.ABI,functionName:"multicall",args:[n,e]})}};function t4(e){return e.multiply(1e4).quotient}t3.ABI=[{inputs:[{internalType:"bytes32",name:"previousBlockhash",type:"bytes32"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"}];var t8=class{constructor(){}static encodeUnwrapWETH9(e,t,n){if("string"==typeof t)return l.Payments.encodeUnwrapWETH9(e,t,n);if(n){let t=t4(n.fee),a=u.validateAndParseAddress(n.recipient);return d.encodeFunctionData({abi:t8.ABI,functionName:"unwrapWETH9WithFee",args:[e,t,a]})}return d.encodeFunctionData({abi:t8.ABI,functionName:"unwrapWETH9",args:[e]})}static encodeSweepToken(e,t,n,a){if("string"==typeof n)return l.Payments.encodeSweepToken(e,t,n,a);if(a){let n=t4(a.fee),i=u.validateAndParseAddress(a.recipient);return d.encodeFunctionData({abi:t8.ABI,functionName:"sweepTokenWithFee",args:[e.address,t,n,i]})}return d.encodeFunctionData({abi:t8.ABI,functionName:"sweepToken",args:[e.address,t]})}static encodePull(e,t){return d.encodeFunctionData({abi:t8.ABI,functionName:"pull",args:[e.address,t]})}static encodeWrapETH(e){return d.encodeFunctionData({abi:t8.ABI,functionName:"wrapETH",args:[e]})}};t8.ABI=[{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"pull",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"wrapETH",outputs:[],stateMutability:"payable",type:"function"}];var t9=e=>{let t=[],n=0,a=0;for(;a<e.pools.length;)e.pools[n].type!==e.pools[a].type&&(t.push(e.pools.slice(n,a)),n=a),++a===e.pools.length&&t.push(e.pools.slice(n,a));return t},t7=(e,t)=>{let{inputToken:n}=e.reduce(({inputToken:e},t)=>{if(!eu(t,e))throw Error("PATH");return{inputToken:eo(t,e)}},{inputToken:t});return n},ne=new u.Percent(50n,100n),nt=class{constructor(){}static encodeV2Swap(e,t,n,a){let i=eg(e,t.slippageTolerance).quotient,o=eA(e,t.slippageTolerance).quotient,p=e.routes[0].path.map(e=>e.wrapped.address),s=n?r.ADDRESS_THIS:void 0===t.recipient?r.MSG_SENDER:u.validateAndParseAddress(t.recipient);if(e.tradeType===u.TradeType.EXACT_INPUT){let e=[i,a?0n:o,p,s];return d.encodeFunctionData({abi:nt.ABI,functionName:"swapExactTokensForTokens",args:e})}let l=[o,i,p,s];return d.encodeFunctionData({abi:nt.ABI,functionName:"swapTokensForExactTokens",args:l})}static encodeStableSwap(e,t,n,a){let i=eg(e,t.slippageTolerance).quotient,o=eA(e,t.slippageTolerance).quotient;if(e.routes.length>1||e.routes[0].pools.some(e=>!er(e)))throw Error("Unsupported trade to encode");let p=e.routes[0],s=p.path.map(e=>e.wrapped.address),l=p.pools.map(e=>BigInt(e.balances.length)),y=n?r.ADDRESS_THIS:void 0===t.recipient?r.MSG_SENDER:u.validateAndParseAddress(t.recipient);if(e.tradeType===u.TradeType.EXACT_INPUT){let e=[s,l,i,a?0n:o,y];return d.encodeFunctionData({abi:nt.ABI,functionName:"exactInputStableSwap",args:e})}let c=[s,l,o,i,y];return d.encodeFunctionData({abi:nt.ABI,functionName:"exactOutputStableSwap",args:c})}static encodeV3Swap(e,t,n,a){let i=[];for(let o of e.routes){let{inputAmount:p,outputAmount:s,pools:l,path:y}=o,c=eg(e,t.slippageTolerance,p).quotient,m=eA(e,t.slippageTolerance,s).quotient,T=1===l.length,f=n?r.ADDRESS_THIS:void 0===t.recipient?r.MSG_SENDER:u.validateAndParseAddress(t.recipient);if(T){if(e.tradeType===u.TradeType.EXACT_INPUT){let e={tokenIn:y[0].wrapped.address,tokenOut:y[1].wrapped.address,fee:l[0].fee,recipient:f,amountIn:c,amountOutMinimum:a?0n:m,sqrtPriceLimitX96:0n};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactInputSingle",args:[e]}))}else{let e={tokenIn:y[0].wrapped.address,tokenOut:y[1].wrapped.address,fee:l[0].fee,recipient:f,amountOut:m,amountInMaximum:c,sqrtPriceLimitX96:0n};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactOutputSingle",args:[e]}))}}else{let t=ef({...o,input:p.currency,output:s.currency},e.tradeType===u.TradeType.EXACT_OUTPUT);if(e.tradeType===u.TradeType.EXACT_INPUT){let e={path:t,recipient:f,amountIn:c,amountOutMinimum:a?0n:m};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactInput",args:[e]}))}else{let e={path:t,recipient:f,amountOut:m,amountInMaximum:c};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactOutput",args:[e]}))}}}return i}static encodeMixedRouteSwap(e,t,n,a){let i=[],o=e.tradeType===u.TradeType.EXACT_INPUT;for(let p of e.routes){let{inputAmount:s,outputAmount:l,pools:y}=p,c=eg(e,t.slippageTolerance,s).quotient,m=eA(e,t.slippageTolerance,l).quotient,T=1===y.length,f=n?r.ADDRESS_THIS:void 0===t.recipient?r.MSG_SENDER:u.validateAndParseAddress(t.recipient),b=e=>e.pools.every(ei),w=e=>e.pools.every(ea),h=e=>e.pools.every(er);if(T){if(b(p))i=[...i,...nt.encodeV3Swap({...e,routes:[p],inputAmount:s,outputAmount:l},t,n,a)];else if(w(p))i=[...i,nt.encodeV2Swap({...e,routes:[p],inputAmount:s,outputAmount:l},t,n,a)];else if(h(p))i=[...i,nt.encodeStableSwap({...e,routes:[p],inputAmount:s,outputAmount:l},t,n,a)];else throw Error("Unsupported route to encode")}else{let e;let t=t9(p),n=e=>e===t.length-1,a=s.currency.wrapped;for(let u=0;u<t.length;u++){let p=t[u];e=t7(p,a);let s=ec([...p],a,e);a=e.wrapped;let l=n(u),y=l?f:r.ADDRESS_THIS,T=0===u?c:0n,g=l?m:0n;if(b(s)){let e=ef(s,!o);if(o){let t={path:e,recipient:y,amountIn:T,amountOutMinimum:g};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactInput",args:[t]}))}else{let t={path:e,recipient:f,amountOut:g,amountInMaximum:T};i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactOutput",args:[t]}))}}else if(w(s)){let e=s.path.map(e=>e.wrapped.address);if(o){let t=[T,g,e,y];i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"swapExactTokensForTokens",args:t}))}else{let t=[g,T,e,y];i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"swapTokensForExactTokens",args:t}))}}else if(h(s)){let e=s.path.map(e=>e.wrapped.address),t=s.pools.map(e=>BigInt(e.balances.length));if(o){let n=[e,t,T,g,y];i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactInputStableSwap",args:n}))}else{let n=[e,t,g,T,y];i.push(d.encodeFunctionData({abi:nt.ABI,functionName:"exactOutputStableSwap",args:n}))}}else throw Error("Unsupported route")}}}return i}static encodeSwaps(e,t,n){let a=Array.isArray(e)?e:[e],i=a.reduce((e,t)=>e+t.routes.length,0),r=a[0];_.default(a.every(e=>e.inputAmount.currency.equals(r.inputAmount.currency)),"TOKEN_IN_DIFF"),_.default(a.every(e=>e.outputAmount.currency.equals(r.outputAmount.currency)),"TOKEN_OUT_DIFF"),_.default(a.every(e=>e.tradeType===r.tradeType),"TRADE_TYPE_DIFF");let o=[],p=r.inputAmount.currency.isNative,s=r.outputAmount.currency.isNative,d=r.tradeType===u.TradeType.EXACT_INPUT&&i>2,y=s||!!t.fee||!!n||d;for(let e of(t.inputTokenPermit&&(_.default(r.inputAmount.currency.isToken,"NON_TOKEN_PERMIT"),o.push(l.SelfPermit.encodePermit(r.inputAmount.currency,t.inputTokenPermit))),a))if(1===e.routes.length&&0===e.routes[0].type)o.push(nt.encodeV2Swap(e,t,y,d));else if(e.routes.every(e=>1===e.type))for(let n of nt.encodeV3Swap(e,t,y,d))o.push(n);else for(let n of nt.encodeMixedRouteSwap(e,t,y,d))o.push(n);let c=u.CurrencyAmount.fromRawAmount(r.inputAmount.currency,0),m=u.CurrencyAmount.fromRawAmount(r.outputAmount.currency,0),T=a.reduce((e,n)=>e.add(eA(n,t.slippageTolerance)),m),f=a.reduce((e,t)=>e.add(t.outputAmount),m);return{calldatas:o,sampleTrade:r,routerMustCustody:y,inputIsNative:p,outputIsNative:s,totalAmountIn:a.reduce((e,n)=>e.add(eg(n,t.slippageTolerance)),c),minimumAmountOut:T,quoteAmountOut:f}}static swapCallParameters(e,t){let{calldatas:n,sampleTrade:a,routerMustCustody:i,inputIsNative:r,outputIsNative:o,totalAmountIn:p,minimumAmountOut:s}=nt.encodeSwaps(e,t);return i&&(o?n.push(t8.encodeUnwrapWETH9(s.quotient,t.recipient,t.fee)):n.push(t8.encodeSweepToken(a.outputAmount.currency.wrapped,s.quotient,t.recipient,t.fee))),r&&(a.tradeType===u.TradeType.EXACT_OUTPUT||nt.riskOfPartialFill(e))&&n.push(l.Payments.encodeRefundETH()),{calldata:t3.encodeMulticall(n,t.deadlineOrPreviousBlockhash),value:l.toHex(r?p.quotient:0n)}}static swapAndAddCallParameters(e,t,n,a,i,r){let o;let{calldatas:p,inputIsNative:s,outputIsNative:d,sampleTrade:y,totalAmountIn:c,quoteAmountOut:m,minimumAmountOut:T}=nt.encodeSwaps(e,t,!0);t.outputTokenPermit&&(_.default(m.currency.isToken,"NON_TOKEN_PERMIT_OUTPUT"),p.push(l.SelfPermit.encodePermit(m.currency,t.outputTokenPermit)));let{inputAmount:{currency:{chainId:f}}}=y,b=n.pool.token0.wrapped.address===c.currency.wrapped.address,{positionAmountIn:w,positionAmountOut:h}=nt.getPositionAmounts(n,b),g=s?u.WNATIVE[f]:w.currency.wrapped,A=d?u.WNATIVE[f]:h.currency.wrapped,E=h.subtract(m.wrapped);E.greaterThan(u.CurrencyAmount.fromRawAmount(h.currency,0))&&(d?p.push(t8.encodeWrapETH(E.quotient)):p.push(t8.encodePull(A,E.quotient))),s?p.push(t8.encodeWrapETH(w.quotient)):p.push(t8.encodePull(g,w.quotient)),0!==i&&p.push(t5.encodeApprove(g,i)),0!==r&&p.push(t5.encodeApprove(A,r));let S=l.Position.fromAmounts({pool:n.pool,tickLower:n.tickLower,tickUpper:n.tickUpper,amount0:b?n.amount0.quotient.toString():T.quotient.toString(),amount1:b?T.quotient.toString():n.amount1.quotient.toString(),useFullPrecision:!1});return p.push(t5.encodeAddLiquidity(n,S,a,t.slippageTolerance)),s?p.push(t8.encodeUnwrapWETH9(0n)):p.push(t8.encodeSweepToken(g,0n)),d?p.push(t8.encodeUnwrapWETH9(0n)):p.push(t8.encodeSweepToken(A,0n)),o=s?c.wrapped.add(w.wrapped).quotient:d?E.quotient:0n,{calldata:t3.encodeMulticall(p,t.deadlineOrPreviousBlockhash),value:l.toHex(o.toString())}}static riskOfPartialFill(e){return Array.isArray(e)?e.some(e=>nt.v3TradeWithHighPriceImpact(e)):nt.v3TradeWithHighPriceImpact(e)}static v3TradeWithHighPriceImpact(e){return!(1===e.routes.length&&0===e.routes[0].type)&&(function(e){let t=u.CurrencyAmount.fromRawAmount(e.outputAmount.currency.wrapped,0);for(let n of e.routes){let{inputAmount:e}=n,a=eT(n);t=t.add(a.quote(e.wrapped))}let n=t.subtract(e.outputAmount.wrapped).divide(t);return new u.Percent(n.numerator,n.denominator)})(e).greaterThan(ne)}static getPositionAmounts(e,t){let{amount0:n,amount1:a}=e.mintAmounts,i=u.CurrencyAmount.fromRawAmount(e.pool.token0,n),r=u.CurrencyAmount.fromRawAmount(e.pool.token1,a),[o,p]=t?[i,r]:[r,i];return{positionAmountIn:o,positionAmountOut:p}}};nt.ABI=[{inputs:[{internalType:"address",name:"_factoryV2",type:"address"},{internalType:"address",name:"_deployer",type:"address"},{internalType:"address",name:"_factoryV3",type:"address"},{internalType:"address",name:"_positionManager",type:"address"},{internalType:"address",name:"_stableFactory",type:"address"},{internalType:"address",name:"_stableInfo",type:"address"},{internalType:"address",name:"_WETH9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"factory",type:"address"},{indexed:!0,internalType:"address",name:"info",type:"address"}],name:"SetStableSwap",type:"event"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMax",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"approveZeroThenMaxMinusOne",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"callPositionManager",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"paths",type:"bytes[]"},{internalType:"uint128[]",name:"amounts",type:"uint128[]"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"uint24",name:"maximumTickDivergence",type:"uint24"},{internalType:"uint32",name:"secondsAgo",type:"uint32"}],name:"checkOracleSlippage",outputs:[],stateMutability:"view",type:"function"},{inputs:[],name:"deployer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactInputParams",name:"params",type:"tuple"}],name:"exactInput",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactInputSingleParams",name:"params",type:"tuple"}],name:"exactInputSingle",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address[]",name:"path",type:"address[]"},{internalType:"uint256[]",name:"flag",type:"uint256[]"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"exactInputStableSwap",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"}],internalType:"struct IV3SwapRouter.ExactOutputParams",name:"params",type:"tuple"}],name:"exactOutput",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMaximum",type:"uint256"},{internalType:"uint160",name:"sqrtPriceLimitX96",type:"uint160"}],internalType:"struct IV3SwapRouter.ExactOutputSingleParams",name:"params",type:"tuple"}],name:"exactOutputSingle",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address[]",name:"path",type:"address[]"},{internalType:"uint256[]",name:"flag",type:"uint256[]"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"exactOutputStableSwap",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"factoryV2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getApprovalType",outputs:[{internalType:"enum IApproveAndCall.ApprovalType",name:"",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"}],internalType:"struct IApproveAndCall.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],internalType:"struct IApproveAndCall.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"previousBlockhash",type:"bytes32"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"int256",name:"amount0Delta",type:"int256"},{internalType:"int256",name:"amount1Delta",type:"int256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"pancakeV3SwapCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"positionManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"pull",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowed",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowedIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_info",type:"address"}],name:"setStableSwap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stableSwapFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stableSwapInfo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"sweepTokenWithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"uint256",name:"feeBips",type:"uint256"},{internalType:"address",name:"feeRecipient",type:"address"}],name:"unwrapWETH9WithFee",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"wrapETH",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],Object.defineProperty(t,"ADDITIONAL_BASES",{enumerable:!0,get:function(){return r.ADDITIONAL_BASES}}),Object.defineProperty(t,"ADDRESS_THIS",{enumerable:!0,get:function(){return r.ADDRESS_THIS}}),Object.defineProperty(t,"BASES_TO_CHECK_TRADES_AGAINST",{enumerable:!0,get:function(){return r.BASES_TO_CHECK_TRADES_AGAINST}}),Object.defineProperty(t,"BASE_SWAP_COST_STABLE_SWAP",{enumerable:!0,get:function(){return r.BASE_SWAP_COST_STABLE_SWAP}}),Object.defineProperty(t,"BASE_SWAP_COST_V2",{enumerable:!0,get:function(){return r.BASE_SWAP_COST_V2}}),Object.defineProperty(t,"BASE_SWAP_COST_V3",{enumerable:!0,get:function(){return r.BASE_SWAP_COST_V3}}),Object.defineProperty(t,"BATCH_MULTICALL_CONFIGS",{enumerable:!0,get:function(){return r.BATCH_MULTICALL_CONFIGS}}),Object.defineProperty(t,"BETTER_TRADE_LESS_HOPS_THRESHOLD",{enumerable:!0,get:function(){return r.BETTER_TRADE_LESS_HOPS_THRESHOLD}}),Object.defineProperty(t,"BIG_INT_TEN",{enumerable:!0,get:function(){return r.BIG_INT_TEN}}),Object.defineProperty(t,"BIPS_BASE",{enumerable:!0,get:function(){return r.BIPS_BASE}}),Object.defineProperty(t,"CHAIN_ID_TO_CHAIN_NAME",{enumerable:!0,get:function(){return r.CHAIN_ID_TO_CHAIN_NAME}}),Object.defineProperty(t,"COST_PER_EXTRA_HOP_STABLE_SWAP",{enumerable:!0,get:function(){return r.COST_PER_EXTRA_HOP_STABLE_SWAP}}),Object.defineProperty(t,"COST_PER_EXTRA_HOP_V2",{enumerable:!0,get:function(){return r.COST_PER_EXTRA_HOP_V2}}),Object.defineProperty(t,"COST_PER_HOP_V3",{enumerable:!0,get:function(){return r.COST_PER_HOP_V3}}),Object.defineProperty(t,"COST_PER_INIT_TICK",{enumerable:!0,get:function(){return r.COST_PER_INIT_TICK}}),Object.defineProperty(t,"COST_PER_UNINIT_TICK",{enumerable:!0,get:function(){return r.COST_PER_UNINIT_TICK}}),Object.defineProperty(t,"CUSTOM_BASES",{enumerable:!0,get:function(){return r.CUSTOM_BASES}}),Object.defineProperty(t,"MIN_BNB",{enumerable:!0,get:function(){return r.MIN_BNB}}),Object.defineProperty(t,"MIXED_ROUTE_QUOTER_ADDRESSES",{enumerable:!0,get:function(){return r.MIXED_ROUTE_QUOTER_ADDRESSES}}),Object.defineProperty(t,"MSG_SENDER",{enumerable:!0,get:function(){return r.MSG_SENDER}}),Object.defineProperty(t,"SMART_ROUTER_ADDRESSES",{enumerable:!0,get:function(){return r.SMART_ROUTER_ADDRESSES}}),Object.defineProperty(t,"STABLE_SWAP_INFO_ADDRESS",{enumerable:!0,get:function(){return r.STABLE_SWAP_INFO_ADDRESS}}),Object.defineProperty(t,"V2_FEE_PATH_PLACEHOLDER",{enumerable:!0,get:function(){return r.V2_FEE_PATH_PLACEHOLDER}}),Object.defineProperty(t,"V2_ROUTER_ADDRESS",{enumerable:!0,get:function(){return r.V2_ROUTER_ADDRESS}}),Object.defineProperty(t,"V3_QUOTER_ADDRESSES",{enumerable:!0,get:function(){return r.V3_QUOTER_ADDRESSES}}),Object.defineProperty(t,"getStableSwapPools",{enumerable:!0,get:function(){return r.getStableSwapPools}}),Object.defineProperty(t,"isStableSwapSupported",{enumerable:!0,get:function(){return r.isStableSwapSupported}}),Object.defineProperty(t,"usdGasTokensByChain",{enumerable:!0,get:function(){return r.usdGasTokensByChain}}),t.PoolType=et,t.RouteType=en,t.SmartRouter=J,t.StableSwap=H,t.SwapRouter=nt}}]);