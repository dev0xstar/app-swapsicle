"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5741],{615741:function(e,r,t){t.r(r),t.d(r,{getAddress:function(){return k},getBalance:function(){return L},getChainId:function(){return b},sendTransaction:function(){return x},signMessage:function(){return M}});var n,i,o,s,a=t(581398),l=t(202593),c=t(609279),u=t(64146),h=t(900241),d=t(82169),E=t(251619),g=t(793901),P=t(861744),N=!1,m=!1,f={debug:1,default:2,info:2,warning:3,error:4,off:5},v=2,I=null,R=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(r=>{try{if("test"!=="test".normalize(r))throw Error("bad normalize")}catch(t){e.push(r)}}),e.length)throw Error("missing "+e.join(", "));if("é"!=="\xe9".normalize("NFD"))throw Error("broken implementation")}catch(e){return e.message}return null}();(n=s||(s={})).DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF",(i=o||(o={})).UNKNOWN_ERROR="UNKNOWN_ERROR",i.NOT_IMPLEMENTED="NOT_IMPLEMENTED",i.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",i.NETWORK_ERROR="NETWORK_ERROR",i.SERVER_ERROR="SERVER_ERROR",i.TIMEOUT="TIMEOUT",i.BUFFER_OVERRUN="BUFFER_OVERRUN",i.NUMERIC_FAULT="NUMERIC_FAULT",i.MISSING_NEW="MISSING_NEW",i.INVALID_ARGUMENT="INVALID_ARGUMENT",i.MISSING_ARGUMENT="MISSING_ARGUMENT",i.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",i.CALL_EXCEPTION="CALL_EXCEPTION",i.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",i.NONCE_EXPIRED="NONCE_EXPIRED",i.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",i.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",i.TRANSACTION_REPLACED="TRANSACTION_REPLACED",i.ACTION_REJECTED="ACTION_REJECTED";var p="0123456789abcdef",T=class e{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){let t=e.toLowerCase();null==f[t]&&this.throwArgumentError("invalid log level name","logLevel",e),v>f[t]||console.log.apply(console,r)}debug(...r){this._log(e.levels.DEBUG,r)}info(...r){this._log(e.levels.INFO,r)}warn(...r){this._log(e.levels.WARNING,r)}makeError(r,t,n){if(m)return this.makeError("censored error",t,{});t||(t=e.errors.UNKNOWN_ERROR),n||(n={});let i=[];Object.keys(n).forEach(e=>{let r=n[e];try{if(r instanceof Uint8Array){let t="";for(let e=0;e<r.length;e++)t+=p[r[e]>>4]+p[15&r[e]];i.push(e+"=Uint8Array(0x"+t+")")}else i.push(e+"="+JSON.stringify(r))}catch(r){i.push(e+"="+JSON.stringify(n[e].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);let s=r,a="";switch(t){case o.NUMERIC_FAULT:{a="NUMERIC_FAULT";let e=r;switch(e){case"overflow":case"underflow":case"division-by-zero":a+="-"+e;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break}case o.CALL_EXCEPTION:case o.INSUFFICIENT_FUNDS:case o.MISSING_NEW:case o.NONCE_EXPIRED:case o.REPLACEMENT_UNDERPRICED:case o.TRANSACTION_REPLACED:case o.UNPREDICTABLE_GAS_LIMIT:a=t}a&&(r+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(r+=" ("+i.join(", ")+")");let l=Error(r);return l.reason=s,l.code=t,Object.keys(n).forEach(function(e){l[e]=n[e]}),l}throwError(e,r,t){throw this.makeError(e,r,t)}throwArgumentError(r,t,n){return this.throwError(r,e.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,r,t,n){e||this.throwError(r,t,n)}assertArgument(e,r,t,n){e||this.throwArgumentError(r,t,n)}checkNormalize(r){null==r&&(r="platform missing String.prototype.normalize"),R&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:R})}checkSafeUint53(r,t){"number"==typeof r&&(null==t&&(t="value not safe"),(r<0||r>=9007199254740991)&&this.throwError(t,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:r}),r%1&&this.throwError(t,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:r}))}checkArgumentCount(r,t,n){n=n?": "+n:"",r<t&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:r,expectedCount:t}),r>t&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:r,expectedCount:t})}checkNew(r,t){(r===Object||null==r)&&this.throwError("missing new",e.errors.MISSING_NEW,{name:t.name})}checkAbstract(r,t){r===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:r.name,operation:"new"}):(r===Object||null==r)&&this.throwError("missing new",e.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return I||(I=new e("logger/5.7.0")),I}static setCensorship(r,t){if(!r&&t&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),N){if(!r)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}m=!!r,N=!!t}static setLogLevel(r){let t=f[r.toLowerCase()];if(null==t){e.globalLogger().warn("invalid log level - "+r);return}v=t}static from(r){return new e(r)}};function y(e,r,t){Object.defineProperty(e,r,{enumerable:!0,value:t,writable:!1})}function _(e){var r,t,n,i;return r=this,t=void 0,n=void 0,i=function*(){let r=Object.keys(e).map(r=>Promise.resolve(e[r]).then(e=>({key:r,value:e})));return(yield Promise.all(r)).reduce((e,r)=>(e[r.key]=r.value,e),{})},new(n||(n=Promise))(function(e,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(r){var t;r.done?e(r.value):((t=r.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((i=i.apply(r,t||[])).next())})}T.errors=o,T.levels=s,new T("properties/5.7.0");var w=new T("abstract-provider/5.7.0"),O=class e{constructor(){w.checkAbstract(new.target,e),y(this,"_isProvider",!0)}getFeeData(){var e,r,t,n;return e=this,r=void 0,t=void 0,n=function*(){let{block:e,gasPrice:r}=yield _({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)}),t=null,n=null,i=null;return e&&e.baseFeePerGas&&(t=e.baseFeePerGas,i=l.O$.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:t,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:r}},new(t||(t=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?i(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(s,a)}l((n=n.apply(e,r||[])).next())})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}},A=function(e,r,t,n){return new(t||(t=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?i(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(s,a)}l((n=n.apply(e,r||[])).next())})},U=new T("abstract-signer/5.7.0"),F=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],C=[T.errors.INSUFFICIENT_FUNDS,T.errors.NONCE_EXPIRED,T.errors.REPLACEMENT_UNDERPRICED],G=class e{constructor(){U.checkAbstract(new.target,e),y(this,"_isSigner",!0)}getBalance(e){return A(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return A(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return A(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield _(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return A(this,void 0,void 0,function*(){this._checkProvider("call");let t=yield _(this.checkTransaction(e));return yield this.provider.call(t,r)})}sendTransaction(e){return A(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(e),t=yield this.signTransaction(r);return yield this.provider.sendTransaction(t)})}getChainId(){return A(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return A(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return A(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return A(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(let r in e)-1===F.indexOf(r)&&U.throwArgumentError("invalid transaction key: "+r,"transaction",e);let r=function(e){let r={};for(let t in e)r[t]=e[t];return r}(e);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&U.throwArgumentError("from address mismatch","transaction",e),r[0])),r}populateTransaction(e){return A(this,void 0,void 0,function*(){let r=yield _(this.checkTransaction(e));null!=r.to&&(r.to=Promise.resolve(r.to).then(e=>A(this,void 0,void 0,function*(){if(null==e)return null;let r=yield this.resolveName(e);return null==r&&U.throwArgumentError("provided ENS name resolves to null","tx.to",e),r})),r.to.catch(e=>{}));let t=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||t)?U.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(0===r.type||1===r.type)&&t&&U.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type)null==r.gasPrice&&(r.gasPrice=this.getGasPrice());else{let e=yield this.getFeeData();if(null==r.type){if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas){if(r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas)}else null!=e.gasPrice?(t&&U.throwError("network does not support EIP-1559",T.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):U.throwError("failed to get consistent fee data",T.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}else 2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return null==r.nonce&&(r.nonce=this.getTransactionCount("pending")),null==r.gasLimit&&(r.gasLimit=this.estimateGas(r).catch(e=>{if(C.indexOf(e.code)>=0)throw e;return U.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",T.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:r})})),null==r.chainId?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(r=>(0!==r[1]&&r[0]!==r[1]&&U.throwArgumentError("chainId address mismatch","transaction",e),r[0])),yield _(r)})}_checkProvider(e){this.provider||U.throwError("missing provider",T.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}},S=e=>O.isProvider(e)?e:G.isSigner(e)&&e.provider?e.provider:new h.Q(e,"any"),D=e=>G.isSigner(e)?e:d.r.isProvider(e)?e.getSigner():new h.Q(e,"any").getSigner(),k=e=>(0,a.i)(void 0,null,function*(){return D(e).getAddress()}),L=(e,r,t,n)=>(0,a.i)(void 0,null,function*(){var i,o;let s=n||(yield k(e));if(!s)return"";let a="";try{a=(null==(i=r.nativeToken)?void 0:i.symbol)===t.symbol||(null==(o=r.nativeToken)?void 0:o.address)===t.address||t.address===c.d?yield X(s,r):yield W(s,t.address,r)}catch(e){console.error(`Error getting balance for ${r.slug} - ${t.address}:`,e)}try{return a&&t.decimals?(0,P.formatUnits)(a,t.decimals):a}catch(e){return a}}),b=e=>(0,a.i)(void 0,null,function*(){return D(e).getChainId()}),x=(e,r)=>(0,a.i)(void 0,[e,r],function*(e,{from:r,to:t,data:n,gas:i,value:o}){let s=D(e),a=yield s["sendUncheckedTransaction"in s?"sendUncheckedTransaction":"sendTransaction"]({from:r,to:t,data:n,gasLimit:i,value:o}),l="string"==typeof a?a:a.hash;return{hash:l,wait:()=>S(e).waitForTransaction(l,2,12e4)}}),M=(e,r)=>(0,a.i)(void 0,null,function*(){return D(e).signMessage(r)}),B={},W=(e,r,t)=>(0,a.i)(void 0,null,function*(){let n=j(t);return n?String((yield new u.Contract(r,["function balanceOf(address owner) view returns (uint256)"],n).balanceOf(e))||""):""}),X=(e,r)=>(0,a.i)(void 0,null,function*(){let t=j(r);if(!t)return"";let n=yield null==t?void 0:t.getBalance(e);return(null==n?void 0:n.toString())||""}),j=e=>{if(!e.rpcUrl)return null;if(!B[e.slug]){let r=new E.H([new g.c(e.rpcUrl,e.chainId)]);B[e.slug]=r}return B[e.slug]}}}]);