(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1687],{286364:function(e,a,n){"use strict";var t=n(667294);a.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{0:a,1:n}=(0,t.useState)(e);return[a,(0,t.useCallback)(async e=>{n(!0);try{return await e()}finally{n(!1)}},[])]}},198822:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return eI}});var t=n(809008),s=n.n(t),r=n(902962),i=n(534799),l=n(101097),c=n(925575),d=n(667294),o=n(555814),u=n(939507),h=n(38952),m=n(438335),p=n(797444),x=n(286364),C=n(685089),b=n(462985),f=n(111126),I=n(707583),N=n(742160),g=n(626880);let w=(e,a)=>{let n=Number(e)/10**a;return isNaN(n)?0:Number(n)},y=async(e,a,n)=>{let t=new b.r6(g.Z[n],"any"),s=[];for(let n of e){if(n.address===f.N){let r=await t.getBalance(a);s.push({chainId:e[0].chainId,address:f.N,balance:w(r,n.decimals)})}else try{let r=new I.CH(n.address,N.RB,t),i=await r.balanceOf(a);s.push({chainId:e[0].chainId,address:n.address,balance:w(i,n.decimals)})}catch(a){console.log(`getMultiChainBalances: error fetching balance for ${n.symbol}`,a),s.push({chainId:e[0].chainId,address:n.address,balance:BigInt(0)})}await new Promise(e=>setTimeout(e,200))}return s};function j(e,a){let{0:n,1:t}=(0,d.useState)(new Map),[s,r]=(0,x.Z)(!1),i=(0,d.useCallback)(()=>{if(0===e.length||!a)return"0.00";r(async()=>{let n=await y(e,a,e[0]?.chainId);t((0,C.GF)(n))})},[e,a,r]);return(0,d.useEffect)(()=>{s||i()},[e,a]),[n,s,i]}var A=n(732543),k=n(738317),v=n(738706),T=n(111295),E=n(519673);function S(){return(0,E.C)(e=>e.rubic)}var M=n(108307),O=n(132519),_=n(322321),L=n(353487);let B={rpcProviders:{[O.BLOCKCHAIN_NAME.ETHEREUM]:{rpcList:[g.Z[L.ChainId.ETHEREUM]]},[O.BLOCKCHAIN_NAME.OPTIMISM]:{rpcList:[g.Z[L.ChainId.OPTIMISM]]},[O.BLOCKCHAIN_NAME.ARBITRUM]:{rpcList:[g.Z[L.ChainId.ARBITRUM]]},[O.BLOCKCHAIN_NAME.POLYGON]:{rpcList:[g.Z[L.ChainId.MATIC]]},[O.BLOCKCHAIN_NAME.FANTOM]:{rpcList:[g.Z[L.ChainId.FANTOM]]},[O.BLOCKCHAIN_NAME.BINANCE_SMART_CHAIN]:{rpcList:[g.Z[L.ChainId.BSC]]},[O.BLOCKCHAIN_NAME.AVALANCHE]:{rpcList:[g.Z[L.ChainId.AVALANCHE]]},[O.BLOCKCHAIN_NAME.TELOS]:{rpcList:[g.Z[L.ChainId.TELOS]]},[O.BLOCKCHAIN_NAME.MANTLE]:{rpcList:[g.Z[L.ChainId.MANTLE]]},[O.BLOCKCHAIN_NAME.TAIKO]:{rpcList:[g.Z[L.ChainId.TAIKO]]}},providerAddress:{[O.CHAIN_TYPE.EVM]:{crossChain:"0x55215Be8eC62B6784449aCf94Cb7449D03432E5a",onChain:"0x55215Be8eC62B6784449aCf94Cb7449D03432E5a"}}},Z={[L.ChainId.ETHEREUM]:"ethereum",[L.ChainId.OPTIMISM]:"optimistic-ethereum",[L.ChainId.ARBITRUM]:"arbitrum",[L.ChainId.MATIC]:"polygon",[L.ChainId.FANTOM]:"fantom",[L.ChainId.BSC]:"binance-smart-chain",[L.ChainId.AVALANCHE]:"avalanche",[L.ChainId.TELOS]:"telos-evm",[L.ChainId.MANTLE]:"mantle",[L.ChainId.TAIKO]:"taiko"},U=[L.ChainId.TELOS,L.ChainId.MANTLE,L.ChainId.TAIKO,L.ChainId.ETHEREUM,L.ChainId.OPTIMISM,L.ChainId.ARBITRUM,L.ChainId.MATIC,L.ChainId.AVALANCHE,L.ChainId.FANTOM,L.ChainId.BSC],R=[L.ChainId.ETHEREUM,L.ChainId.OPTIMISM,L.ChainId.ARBITRUM,L.ChainId.MATIC,L.ChainId.FANTOM,L.ChainId.BSC,L.ChainId.AVALANCHE,L.ChainId.TELOS,L.ChainId.MANTLE,L.ChainId.TAIKO],H=[L.ChainId.ARBITRUM,L.ChainId.AVALANCHE,L.ChainId.BSC,L.ChainId.ETHEREUM,L.ChainId.FANTOM,L.ChainId.MANTLE,L.ChainId.OPTIMISM,L.ChainId.MATIC,L.ChainId.TAIKO,L.ChainId.TELOS],P={[L.ChainId.TELOS]:L.ChainId.TELOS,[L.ChainId.MANTLE]:L.ChainId.TAIKO,[L.ChainId.TAIKO]:L.ChainId.MANTLE,[L.ChainId.ETHEREUM]:L.ChainId.ETHEREUM,[L.ChainId.OPTIMISM]:L.ChainId.OPTIMISM,[L.ChainId.ARBITRUM]:L.ChainId.ARBITRUM,[L.ChainId.MATIC]:L.ChainId.MATIC,[L.ChainId.FANTOM]:L.ChainId.FANTOM,[L.ChainId.BSC]:L.ChainId.BSC,[L.ChainId.AVALANCHE]:L.ChainId.AVALANCHE},F=Object.entries(Z).sort((e,a)=>{let[n]=e,[t]=a;return H.indexOf(Number(n))-H.indexOf(Number(t))}).map(e=>{let[a]=e;return _.b[a]});var K=n(75392),$=n(492163);function D(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,t)}return n}function V(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?D(Object(n),!0).forEach(function(a){(0,M.Z)(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}var z=()=>{let{walletProvider:e}=(0,$.B0)(),{account:a,chainId:n}=(0,u.Z)(),{inputTokens:t,outputTokens:s}=S(),r=(0,E.T)(),i=async()=>{let n={[O.CHAIN_TYPE.EVM]:{address:a||"0x0000000000000000000000000000000000000000",core:e}},t=V(V({},B),{},{walletProvider:n});return await O.SDK.createSDK(t)},l=(0,d.useCallback)((e,a,n)=>{if(0===e.length){n?r((0,K._X)([])):r((0,K.Mi)([]));return}let i=e.map(e=>{let a={chainSlug:null,symbol:e.symbol,address:e.address,chainId:null,decimals:e.decimals,name:e.name,logoURI:e.image,transferrable:!1};switch(e.blockchainNetwork){case"telos-evm":a.chainId=40,a.chainSlug="telos";break;case"mantle":a.chainId=5e3,a.chainSlug="mantle";break;case"ethereum":a.chainId=1,a.chainSlug="eth";break;case"binance-smart-chain":a.chainId=56,a.chainSlug="bsc";break;case"polygon":a.chainId=137,a.chainSlug="polygon";break;case"avalanche":a.chainId=43114,a.chainSlug="avalanche";break;case"fantom":a.chainId=250,a.chainSlug="fantom";break;case"arbitrum":a.chainId=42161,a.chainSlug="arbitrum";break;case"optimistic-ethereum":a.chainId=10,a.chainSlug="optimism";break;case"taiko":a.chainId=167e3,a.chainSlug="taiko"}return a}),l=[...t,...i],c=[...s,i];n?r((0,K._X)(a>1?c:i)):r((0,K.Mi)(a>1?l:i)),r((0,K.Id)({40:"Telos",5e3:"Mantle",56:"BSC",1:"Ethereum",137:"Polygon",42161:"Arbitrum",250:"Fantom",43114:"Avalanche",10:"Optimism",167e3:"Taiko"}))},[r,n]),c=e=>e&&0!==e.length?(e[0]?.type=="TOKEN"&&e.push(e.shift()),e):[],o=(0,d.useCallback)(async(e,a,n)=>{let t=await fetch(`https://tokens.rubic.exchange/api/v1/tokens/?network=${e}&page=${a??1}&pageSize=10`,{headers:{Accept:"application/json"}}),{results:s}=await t.json();l(c(s),a,n)},[l]),h=(0,d.useCallback)(async(e,a,n,t)=>{let s=await fetch(`https://tokens.rubic.exchange/api/v1/tokens/?network=${e}&symbol=${a}&page=${n??1}&pageSize=10`,{headers:{Accept:"application/json"}}),{results:r}=await s.json();l(r,n,t)},[l]),m=(0,d.useCallback)(async(e,a,n,t)=>{let s=await fetch(`https://tokens.rubic.exchange/api/v1/tokens/?network=${e}&address=${a}&page=${n??1}&pageSize=10`,{headers:{Accept:"application/json"}}),{results:r}=await s.json();l(r,n,t)},[l]),p=(0,d.useCallback)(async()=>{try{await o(Z[n??1],1,!1),await o(Z[P[n]||1],1,!0)}catch(e){console.log("getRubicTokens",e)}},[n,o]),x=async(e,a,n,t,s)=>{let r=await i();if(!r)return!1;let l={address:n.address,blockchain:n.chainSlug.toUpperCase()},c={address:s.address,blockchain:s.chainSlug.toUpperCase()};try{return await r.crossChainManager.calculateTrade(l,t,c,{receiverAddress:a,fromAddress:e,slippageTolerance:.5})}catch(e){return console.log("handleCross",e),e}},C=async(e,a,n,t)=>{let s=await i();if(!s)return!1;let r=await O.Token.createToken({address:a.address,blockchain:a.chainSlug.toUpperCase()}),l=await O.Token.createToken({address:t.address,blockchain:t.chainSlug.toUpperCase()});try{return await s.onChainManager.calculateTrade(r,n,l,{fromAddress:e,slippageTolerance:.5})}catch(e){return console.log("handleCross",e),e}};return{initializeRubic:i,getRubicTokens:p,handleSameChain:C,handleCrossChainQuotes:x,getRubicTokensForNetwork:o,getRubicTokensByAddress:m,getRubicTokensBySymbol:h}},q=n(80628),G=n(168019),X=n(611794),Y=n(960239),J=n(425675),Q=n.n(J),W=n(192886),ee=n(280544),ea=n(132601),en=n(141842),et=n(590526),es=n(891444),er=n(785910),ei=n(538578),el=n(926146),ec=n(785893),ed=function(e){let{currency:a,balance:n,onSelect:t,onDismiss:s,selectedCurrency:r,chainNames:i,loading:l}=e,{account:c}=(0,u.Z)(),o=(0,d.useMemo)(()=>a?isNaN(Number(n))?0:Number(n)>.99?Number(n).toFixed(2):Number(n).toFixed(6):null,[a,n]),h=(0,d.useMemo)(()=>l?(0,ec.jsx)(X.Z,{}):o?(0,ec.jsx)(el.Z,{balance:o}):null,[o,l]),m=(0,d.useMemo)(()=>a?i[a.chainId]:"",[a,i]),p=(0,d.useCallback)(()=>{a!==r&&(t(a),s())},[a,s,t,r]);return(0,ec.jsx)("div",{className:(0,ei.AK)(a===r&&"opacity-20 pointer-events-none","flex items-center w-full hover:bg-dark-800/40 px-4 py-2"),onClick:p,children:(0,ec.jsxs)("div",{className:"flex items-center justify-between flex-grow gap-2 rounded cursor-pointer",children:[(0,ec.jsxs)("div",{className:"flex flex-row items-center flex-grow gap-3",children:[(0,ec.jsx)(Q(),{className:"rounded-full",src:a?.logoURI||Y.R,alt:"",width:32,height:32}),(0,ec.jsxs)("div",{className:"flex flex-col",children:[(0,ec.jsx)(W.Z,{variant:"base",weight:700,className:"text-high-emphesis",children:a.symbol}),(0,ec.jsxs)(W.Z,{variant:"xs",className:"text-secondary",children:["On ",m]})]})]}),(0,ec.jsx)("div",{className:"flex items-center",children:h})]})})},eo=function(e){let{tokens:a,balances:n,onSelect:t,onDismiss:s,selectedCurrency:r,chainNames:i,loading:l}=e;return a.length?(0,ec.jsx)("div",{className:"flex flex-col flex-1 flex-grow min-h-[50vh] lg:min-h-fit overflow-hidden h-full divide-y divide-dark-800",children:a.map((e,a)=>(0,ec.jsx)(ed,{currency:e,balance:(0,C.UG)(e,n),onSelect:t,onDismiss:s,selectedCurrency:r,chainNames:i,loading:l},a))}):(0,ec.jsx)("div",{className:"px-4 py-2 text-base text-secondary",children:"No results found"})},eu=function(e){let{tokens:a,balances:n,isOpen:t,onDismiss:s,onCurrencySelect:r,selectedCurrency:i,onChainSelect:l,selectedChainId:c,chainNames:o,supportedChainIds:h,isOutputCurrency:m=!1,loading:p}=e,{0:x,1:C}=(0,d.useState)(""),{getRubicTokensForNetwork:b,getRubicTokensByAddress:f,getRubicTokensBySymbol:I}=z(),{chainId:N,provider:g}=(0,u.Z)(),w=m?"Select a token":"Select a network",y=async e=>{let a=F.filter(a=>Number(a.chainId)===e)[0];try{await g.send("wallet_switchEthereumChain",[{chainId:a.chainId}]),s()}catch(e){if(4902===e.code)await g.send("wallet_addEthereumChain",[{chainId:a.chainId,chainName:a.chainName,nativeCurrency:a.nativeCurrency,rpcUrls:a.rpcUrls,blockExplorerUrls:a.blockExplorerUrls}]),s();else throw console.log("switchNetwork: ",e),e}},j=async e=>{let a=(0,et.UJ)(e);C(a||e),a?await f(Z[c],a||e,1,m):await I(Z[c],e,1,m)},A=async e=>{try{e===N||m||await y(e)}catch(e){console.error("onNetworkSelect",e),es.Am.error(ea.ag._(ea.ag._("Failed to switch network")));return}await b(Z[e],1,m),l(e)};return(0,ec.jsxs)(en.S.Controlled,{isOpen:t,onDismiss:s,children:[(0,ec.jsx)(en.S.Header,{onClose:s,header:w}),!m&&(0,ec.jsx)("p",{className:"text-sm text-dark-200",children:ea.ag._(ea.ag._("Only native gas token supported for now"))}),(0,ec.jsx)("div",{className:"grid grid-cols-4 gap-4 p-2 my-2 overflow-hidden overflow-y-auto border rounded place-items-center border-dark-800 bg-dark-1000",children:F.map(e=>h.includes(parseInt(e.chainId))&&(0,ec.jsxs)("button",{onClick:()=>A(Number(e.chainId)),disabled:m&&e.chainId===N.toString(),className:`flex flex-col items-center justify-start p-4 transition-all duration-300 ease-in-out rounded cursor-pointer w-max hover:bg-dark-800 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent ${c===Number(e.chainId)?"bg-dark-700":""}`,children:[(0,ec.jsx)(Q(),{className:"rounded-full mb-2",src:er.w[Number(e.chainId)],alt:e.chainName,width:28,height:28}),(0,ec.jsx)("p",{className:"text-sm",children:e.chainName})]},e.chainId))}),m&&(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(G.Z.Base,{placeholder:ea.ag._(ea.ag._("Search symbol or paste address")),value:x,onChange:j}),(0,ec.jsx)("div",{className:"max-h-[350px] h-full mt-4 overflow-hidden overflow-y-auto border rounded border-dark-800 bg-dark-1000",children:(0,ec.jsx)(eo,{tokens:a,balances:n,onSelect:r,onDismiss:s,selectedCurrency:i,chainNames:o,loading:p})})]})]})},eh=d.memo(function(e){let{onCurrencySelect:a,onChange:n,value:t,currency:s,tokens:r,balances:i,balancesLoading:l,isOutputCurrency:c=!1,chainNames:o,supportedChainIds:h}=e,{account:m,openWeb3Modal:p,chainId:x}=(0,u.Z)(),{0:b,1:f}=(0,d.useState)(!1),I=(0,d.useCallback)(e=>e,[]),N=(0,d.useMemo)(()=>I(s?s.chainId:x),[s,x,I]),g=(0,d.useMemo)(()=>s?(0,C.UG)(s,i):null,[s,i]),w=(0,d.useMemo)(()=>{let e=+Number(g).toFixed(4);return 0===e?"0.00":e<1e-4?"< 0.0001":isNaN(e)?"0.00":(0,ee.LH)(g)},[g]),y=(0,d.useMemo)(()=>s?o[s.chainId]:"",[s,o]),j=(0,d.useCallback)(()=>{if(!m){p();return}f(!0)},[f,p,m]),A=(0,d.useCallback)(e=>{n&&n(e)},[n]),k=(0,d.useCallback)(e=>{let a=(0,ee.KH)(()=>{let a=e.trim(),n=g||"0";return""===a?"":"."===a?"0.":Number(a)>Number(n)?n:18>=(0,C.ol)(a)?a:null});null!==a&&A(a)},[A,g]),v=(0,d.useCallback)(e=>{I(e)},[I]),T=(0,d.useCallback)(()=>{g&&!c&&A(String(g))},[c,A,g]);return(0,ec.jsxs)("div",{className:"p-4 rounded bg-dark-card",children:[(0,ec.jsx)(eu,{tokens:r,isOpen:b,onDismiss:()=>f(!1),onCurrencySelect:a,selectedCurrency:s,onChainSelect:v,selectedChainId:N,balances:i,chainNames:o,supportedChainIds:h,isOutputCurrency:c,loading:l}),(0,ec.jsxs)("div",{className:"flex flex-col items-center sm:flex-row",children:[(0,ec.jsxs)("div",{className:"flex flex-col w-full",children:[(0,ec.jsxs)("button",{className:"text-2xl font-bold text-white whitespace-nowrap px-2.5 py-2 rounded flex items-center justify-between w-max hover:bg-dark-card-hover",onClick:j,children:[(0,ec.jsx)("div",{className:"w-8 h-8 mr-2.5 rounded-full",children:(0,ec.jsx)(Q(),{src:s?.logoURI||Y.R,alt:"",width:32,height:32})}),(0,ec.jsxs)("div",{className:"flex flex-col items-start",children:[(0,ec.jsx)(W.Z,{variant:"base",weight:700,className:"text-high-emphesis",children:s?s.symbol:"Select a token"}),s&&(0,ec.jsxs)(W.Z,{variant:"xs",className:"text-secondary",children:["On ",y]})]}),(0,ec.jsx)("span",{className:"duration-[0.3s] ml-4",children:(0,ec.jsx)(q.Z,{size:18})})]}),s&&m?(0,ec.jsx)("div",{className:"mt-2 form_ble_spbt",children:(0,ec.jsxs)("p",{className:"flex items-center w-max",children:[(0,ec.jsxs)("span",{className:"mr-2",children:["Balance: ",!l&&w]})," ",l&&(0,ec.jsx)(X.Z,{size:"14px",color:"white"})]})}):(0,ec.jsx)("div",{className:"flex mt-7"})]}),(0,ec.jsxs)("div",{className:"w-full border inp_bx_bg border-white/10",children:[(0,ec.jsx)(G.Z.Numeric,{value:t,disabled:l,id:`amount-${s?.symbol}`,readOnly:c,onUserInput:k,className:"w-full text-3xl bg-transparent pr-0 py-1 text-left text-white",placeholder:"0"}),!c&&(0,ec.jsx)("button",{onClick:T,children:"Max"})]})]})]})}),em=n(827434),ep=function(e){let{inputValue:a,onInput:n,outputValue:t,inputCurrency:s,outputCurrency:r,inputCurrencyTokens:i,outputCurrencyTokens:l,inputTokenBalances:c,outputTokenBalances:d,inputBalancesLoading:o,outputBalancesLoading:u,onInputCurrencySelect:h,onOutputCurrencySelect:m,chainNames:p}=e;return(0,ec.jsxs)("div",{className:"flex flex-col",children:[(0,ec.jsx)(eh,{value:a,onChange:n,currency:s,onCurrencySelect:h,tokens:i,balances:c,balancesLoading:o,chainNames:p,supportedChainIds:U}),(0,ec.jsx)("span",{className:"flex items-center justify-center w-full",children:(0,ec.jsx)(em.Z,{})}),(0,ec.jsx)(eh,{value:t,currency:r,onCurrencySelect:m,tokens:l,balances:d,balancesLoading:u,chainNames:p,supportedChainIds:R,isOutputCurrency:!0})]})},ex=n(778843),eC=function(e){let{quote:a,idx:n,handleQuote:t,selectedQuote:s}=e,{trade:r}=a||{},{to:i,feeInfo:l,type:c,routePath:d}=r||{},{rubicProxy:o,provider:u}=l||{},{fixedFee:h}=o||{},{cryptoFee:m}=u||{},p=Number(i?._weiAmount)/10**(i?.decimals??0),x=(Number(i?._price??0)*p).toLocaleString("en-US",{style:"currency",currency:"USD"}),C=h?.token?.symbol,b=Number(h?.amount??0)+Number(m?.amount??0),f=Number(h?.token?._price??0)*b;return(0,ec.jsxs)("button",{className:`grid sm:grid-cols-2 place-items-start gap-y-2 w-full p-3 my-2 transition-all duration-300 ease-in-out rounded bg-dark-800 hover:bg-dark-800/70 disabled:hover:bg-dark-800 ${s?.trade?.type===c?"shadow-[inset_0px_0px_2px_2px_rgba(81,97,242,1)]":""} ${a.error?"shadow-[inset_0px_0px_2px_2px_rgba(255,56,56,0.4)]":""}`,disabled:!!a.error,onClick:()=>t(n),children:[(0,ec.jsxs)("div",{className:"flex items-center text-white",children:[Number(p)>.9?Number(p).toFixed(2):Number(p).toFixed(6)," ",i?.symbol," ",!isNaN(Number(i?._price))&&(0,ec.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",x,")"]})]}),(0,ec.jsxs)("div",{className:"flex items-center",children:[(0,ec.jsx)("span",{className:"text-gray-400",children:"Fee: "}),(0,ec.jsxs)("span",{className:"ml-2 text-white",children:[b>.9?b.toFixed(2):b.toFixed(6)," ",C," "]}),(0,ec.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",f.toLocaleString("en-US",{style:"currency",currency:"USD"}),")"]})]}),(0,ec.jsx)("div",{className:"text-gray-400",children:c.toUpperCase()}),(0,ec.jsx)("div",{children:a.error?(0,ec.jsxs)("span",{className:"text-red",children:["Min is ",Number(a.error.minAmount).toFixed(4)," ",a.error.tokenSymbol]}):(0,ec.jsxs)("span",{className:"flex w-full text-xs",children:[d?.map((e,a)=>ec.jsx(ex.Z,{title:e.path[0].blockchain,children:ec.jsxs("span",{className:"mr-1",children:[e.path[0].symbol," >"]})},a)),(0,ec.jsx)(ex.Z,{title:i.blockchain,children:(0,ec.jsx)("span",{children:i?.symbol})},n)]})})]})},eb=n(380203),ef=function(){let e=(0,E.T)(),{inputTokens:a,outputTokens:n,chainNames:t}=S(),{account:s,openWeb3Modal:r,chainId:i}=(0,u.Z)(),{handleCrossChainQuotes:l,handleSameChain:c}=z(),{0:C,1:b}=(0,d.useState)(""),{0:f,1:I}=(0,d.useState)(""),{0:N,1:g}=(0,d.useState)(s),{0:w,1:y}=(0,d.useState)(a[0]),{0:M,1:O}=(0,d.useState)(n[0]),{0:_,1:L}=(0,d.useState)([]),{0:B,1:Z}=(0,d.useState)(!1),{0:U,1:R}=(0,d.useState)(null),[H,P]=(0,x.Z)(),[F,K]=(0,x.Z)(),[$,D]=(0,x.Z)(),[V,q,G]=j(a,s),[X,Y,J]=j(n,(0,h.UJ)(N)?N:s),Q=!w||!M||!N||!s||B||H||$||!U||0===_.length,W=(0,d.useMemo)(()=>s?B?"No route found":$?"Bridging...":H?"Fetching quotes...":F?"Approving...":"Bridge":"Connect wallet",[s,H,B,$,F]),ee=(0,d.useCallback)(()=>{I(""),Z(!1),L([]),R(null)},[]),ea=e=>{let a=_[e],n=a?.trade?.to._weiAmount,t=a?.trade?.to?.decimals;I((0,eb.mb)(n,t)),R(a)},en=(0,m.Z)(async e=>{if(ee(),!e||0===parseFloat(e))return;let a=[];if(!w||!M||!N||!s)return;if((0===(a=w.chainId!==M.chainId?await P(()=>l(s,N,w,e,M)):await P(()=>c(s,w,e,M))).length||!a.length)&&!H){Z(!0),console.log("no route found");return}L(a.filter(e=>null!==e.trade));let n=a[0]?.trade?.to._weiAmount,t=a[0]?.trade?.to?.decimals;a[0].error?(I(""),R(null)):(I((0,eb.mb)(n,t)),R(a[0]))},500,[w,M,N,s,k.Z,ee]),et=(0,d.useCallback)((a,n)=>{e((0,T.dT)({hash:a,summary:n,from:s,chainId:Number(w?.chainId)}))},[e,s,w?.chainId]),er=(0,d.useCallback)(async e=>{et(e,`Rubic ${w?.symbol}`)},[et]),ei=(0,d.useCallback)(async e=>{et(e,`Rubic Approve ${w?.symbol}`)},[et]),el=(0,d.useCallback)(async()=>{if(!Q&&U)try{await U.trade.needApprove()&&await K(()=>U.trade.approve({onTransactionHash:ei},!1,U.trade.from._weiAmount)),await D(()=>U.trade.swap({onConfirm:er,useEip155:!0})),ee(),G(),J()}catch(a){let e;Number(a.requiredBalance)>0&&(e=`Insufficient ${w.symbol} balance`),a.message.includes("insufficient funds for transfer")&&(e="Insufficient funds for transfer"),es.Am.error(e||"Error while trying to bridge, please check the browser console for more details")}},[Q,ee,G,J,D,K,U,er,ei,w]),ed=(0,d.useCallback)(e=>{b(e),ee(),en(e)},[ee,en]),eo=(0,d.useCallback)(()=>{s?el():r()},[s,r,el]);return(0,d.useEffect)(()=>{g(s)},[s]),(0,d.useEffect)(()=>{y(a[0])},[a]),(0,d.useEffect)(()=>{O(n.find(e=>e.symbol===M?.symbol&&e.chainId===M?.chainId)??n[0])},[n]),(0,d.useEffect)(()=>{C&&(ee(),en(C))},[w,M,s,i]),(0,d.useEffect)(()=>{a&&w&&s&&i&&G()},[a,w,n,i,G]),(0,d.useEffect)(()=>{n&&M&&s&&i&&J()},[n,M,J]),(0,ec.jsx)(o.Z,{className:"z-10 pt-4 mt-[6%] space-t-6 md:pt-8 lg:pt-12 cstm_cntnr freezer",maxWidth:"2xl",children:(0,ec.jsx)("div",{className:"px-0 sm:max-1280",children:(0,ec.jsx)("div",{className:"flex justify-center",children:(0,ec.jsx)("div",{className:"w-[95%] sm:w-[80%] max-w-[550px] min-w-[310px]",children:(0,ec.jsxs)("div",{className:"flex flex-col order-first gap-2 p-4 icecard h-fit xl:col-span-2 2xl:col-span-2",children:[(0,ec.jsx)("div",{className:"flex justify-between mb-3",children:(0,ec.jsx)("div",{children:(0,ec.jsx)("h3",{children:"Rubic"})})}),(0,ec.jsx)(ep,{inputValue:C,onInput:ed,outputValue:f,inputCurrency:w,outputCurrency:M,inputCurrencyTokens:a,outputCurrencyTokens:n,inputTokenBalances:V,outputTokenBalances:X,inputBalancesLoading:q,outputBalancesLoading:Y,onInputCurrencySelect:y,onOutputCurrencySelect:O,chainNames:t}),(0,ec.jsx)(p.Z,{value:N,onChange:g,disabled:!s||!w?.transferrable}),(0,ec.jsx)(v.Z,{Header:(0,ec.jsx)("div",{className:"px-1.5 py-1 flex items-center",children:"Providers List"}),Rows:_.map((e,a)=>({custom:(0,ec.jsx)(eC,{quote:e,idx:a,handleQuote:ea,selectedQuote:U})})),ButtonContent:0===_.length?"0 quotes":`${_.length} quotes`}),(0,ec.jsx)(A.Z,{onClick:eo,disabled:Q,loading:H||$||F,children:W})]})})})})})};function eI(){let{getRubicTokens:e}=z(),a=(0,d.useCallback)(async()=>{await e()},[e]);return(0,d.useEffect)(()=>{a()},[a]),(0,ec.jsxs)(ec.Fragment,{children:[(0,ec.jsx)(s(),{children:(0,ec.jsx)("title",{children:"Swapsicle"})}),(0,ec.jsx)(r.PB,{title:"Swapsicle"}),(0,ec.jsx)(c.Z,{image:"icebgtokenswap2"}),(0,ec.jsx)(ef,{})]})}eI.Guard=(0,l.Z)(i.L.RUBIC)},380203:function(e,a,n){"use strict";n.d(a,{mb:function(){return r},r0:function(){return i}});var t=n(970794);new t.Z(0),new t.Z(1),new t.Z(2),new t.Z(9),new t.Z(10);let s=e=>new t.Z(e.toString()),r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=Number(e)/10**a;return isNaN(n)?0:Number(n).toFixed(a)},i=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=s(e),t=s(10**a);return n.multipliedBy(t)}},372772:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rubic",function(){return n(198822)}])},543094:function(){},69159:function(){},471958:function(){},540127:function(){},127790:function(){},473105:function(){},765308:function(){},588924:function(){},55024:function(){}},function(e){e.O(0,[3662,8543,3714,5904,1090,9513,8766,6151,7231,7098,5551,2962,2048,2206,3062,8269,794,4757,4457,8363,4431,122,930,2888,9774,179],function(){return e(e.s=372772)}),_N_E=e.O()}]);